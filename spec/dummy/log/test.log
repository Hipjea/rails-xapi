  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "xapi_middleware_statements"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "xapi_middleware_statements" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "actor_name" varchar, "verb_id" varchar, "object_identifier" varchar, "statement_json" text, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20231204141223)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2023-12-05 08:09:57.979701', '2023-12-05 08:09:57.979703') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '3bbffdf754463d64cde4b5fd4a5aad327b07f116', '2023-12-05 08:09:57.980038', '2023-12-05 08:09:57.980038') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "xapi_middleware_statements"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "xapi_middleware_statements" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "actor_name" varchar, "verb_id" varchar, "object_identifier" varchar, "statement_json" text, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20231204141223)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2023-12-05 08:10:31.325735', '2023-12-05 08:10:31.325737') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '3bbffdf754463d64cde4b5fd4a5aad327b07f116', '2023-12-05 08:10:31.326078', '2023-12-05 08:10:31.326079') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:13:34.554555', '2023-12-05 08:13:34.554555');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:13:34.554555', '2023-12-05 08:13:34.554555')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:14:39.744653', '2023-12-05 08:14:39.744653');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:14:39.744653', '2023-12-05 08:14:39.744653')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:14:51.203904', '2023-12-05 08:14:51.203904');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:14:51.203904', '2023-12-05 08:14:51.203904')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:14:53.644834', '2023-12-05 08:14:53.644834');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:14:53.644834', '2023-12-05 08:14:53.644834')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:15:59.282503', '2023-12-05 08:15:59.282503');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:15:59.282503', '2023-12-05 08:15:59.282503')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:16:56.075923', '2023-12-05 08:16:56.075923');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:16:56.075923', '2023-12-05 08:16:56.075923')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:18:02.669387', '2023-12-05 08:18:02.669387');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:18:02.669387', '2023-12-05 08:18:02.669387')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:18:28.167703', '2023-12-05 08:18:28.167703');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:18:28.167703', '2023-12-05 08:18:28.167703')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:19:06.890876', '2023-12-05 08:19:06.890876');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:19:06.890876', '2023-12-05 08:19:06.890876')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:19:53.140045', '2023-12-05 08:19:53.140045');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:19:53.140045', '2023-12-05 08:19:53.140045')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:27:33.455678', '2023-12-05 08:27:33.455678');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:27:33.455678', '2023-12-05 08:27:33.455678')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:27:43.047645', '2023-12-05 08:27:43.047645');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:27:43.047645', '2023-12-05 08:27:43.047645')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:28:08.444624', '2023-12-05 08:28:08.444624');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:28:08.444624', '2023-12-05 08:28:08.444624')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:29:01.207523', '2023-12-05 08:29:01.207523');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:29:01.207523', '2023-12-05 08:29:01.207523')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:30:02.513001', '2023-12-05 08:30:02.513001');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:30:02.513001', '2023-12-05 08:30:02.513001')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:30:33.343080', '2023-12-05 08:30:33.343080');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:30:33.343080', '2023-12-05 08:30:33.343080')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:31:05.272067', '2023-12-05 08:31:05.272067');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:31:05.272067', '2023-12-05 08:31:05.272067')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:31:25.689158', '2023-12-05 08:31:25.689158');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:31:25.689158', '2023-12-05 08:31:25.689158')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:31:45.131141', '2023-12-05 08:31:45.131141');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:31:45.131141', '2023-12-05 08:31:45.131141')[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:32:08.370657', '2023-12-05 08:32:08.370657');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:32:08.370657', '2023-12-05 08:32:08.370657')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:32:44.480442', '2023-12-05 08:32:44.480442');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:32:44.480442', '2023-12-05 08:32:44.480442')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:32:59.830127', '2023-12-05 08:32:59.830127');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:32:59.830127', '2023-12-05 08:32:59.830127')[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:33:13.906031', '2023-12-05 08:33:13.906031');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:33:13.906031', '2023-12-05 08:33:13.906031')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:33:40.397176', '2023-12-05 08:33:40.397176');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:33:40.397176', '2023-12-05 08:33:40.397176')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:34:12.050411', '2023-12-05 08:34:12.050411');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:34:12.050411', '2023-12-05 08:34:12.050411')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:34:35.274869', '2023-12-05 08:34:35.274869');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:34:35.274869', '2023-12-05 08:34:35.274869')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:34:50.471296', '2023-12-05 08:34:50.471296');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:34:50.471296', '2023-12-05 08:34:50.471296')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:35:00.333081', '2023-12-05 08:35:00.333081');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:35:00.333081', '2023-12-05 08:35:00.333081')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:35:13.423891', '2023-12-05 08:35:13.423891');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:35:13.423891', '2023-12-05 08:35:13.423891')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:35:34.354298', '2023-12-05 08:35:34.354298');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:35:34.354298', '2023-12-05 08:35:34.354298')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":null,\"success\":false,\"score\":{\"raw\":null,\"min\":null,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:35:36.437078', '2023-12-05 08:35:36.437078');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:35:36.437078', '2023-12-05 08:35:36.437078')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":null,\"success\":false,\"score\":{\"raw\":null,\"min\":null,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:37:09.606963', '2023-12-05 08:37:09.606963');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:37:09.606963', '2023-12-05 08:37:09.606963')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":null,\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:37:13.560111', '2023-12-05 08:37:13.560111');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:37:13.560111', '2023-12-05 08:37:13.560111')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:38:45.230511', '2023-12-05 08:38:45.230511');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:38:45.230511', '2023-12-05 08:38:45.230511')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:39:00.989713', '2023-12-05 08:39:00.989713');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:39:00.989713', '2023-12-05 08:39:00.989713')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:39:05.255887', '2023-12-05 08:39:05.255887');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:39:05.255887', '2023-12-05 08:39:05.255887')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:39:10.097245', '2023-12-05 08:39:10.097245');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:39:10.097245', '2023-12-05 08:39:10.097245')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":null}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:41:15.178926', '2023-12-05 08:41:15.178926');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:41:15.178926', '2023-12-05 08:41:15.178926')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null,
  "result": {
    "response": "The user answered",
    "success": true,
    "score": {
      "raw": 50,
      "min": 0,
      "max": 100
    }
  }
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:41:24.452298', '2023-12-05 08:41:24.452298');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:41:24.452298', '2023-12-05 08:41:24.452298')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null,
  "result": {
    "response": "The user answered",
    "success": true,
    "score": {
      "raw": 50,
      "min": 0,
      "max": 100
    }
  }
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:41:36.467486', '2023-12-05 08:41:36.467486');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:41:36.467486', '2023-12-05 08:41:36.467486')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null,
  "result": {
    "response": "The user answered",
    "success": true,
    "score": {
      "raw": 50,
      "min": 0,
      "max": 100
    }
  }
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:41:51.668377', '2023-12-05 08:41:51.668377');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:41:51.668377', '2023-12-05 08:41:51.668377')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null,
  "result": {
    "response": "The user answered",
    "success": true,
    "score": {
      "raw": 50,
      "min": 0,
      "max": 100
    }
  }
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:41:59.736817', '2023-12-05 08:41:59.736817');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:41:59.736817', '2023-12-05 08:41:59.736817')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null,
  "result": {
    "response": "The user answered",
    "success": true,
    "score": {
      "raw": 50,
      "min": 0,
      "max": null
    }
  }
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:42:15.219999', '2023-12-05 08:42:15.219999');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:42:15.219999', '2023-12-05 08:42:15.219999')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null,
  "result": {
    "response": "The user answered",
    "success": true,
    "score": {
      "raw": 50,
      "min": 0,
      "max": null
    }
  }
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:42:34.987323', '2023-12-05 08:42:34.987323');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:42:34.987323', '2023-12-05 08:42:34.987323')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:42:43.765112', '2023-12-05 08:42:43.765112');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:42:43.765112', '2023-12-05 08:42:43.765112')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:45:52.751256', '2023-12-05 08:45:52.751256');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:45:52.751256', '2023-12-05 08:45:52.751256')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:45:59.825664', '2023-12-05 08:45:59.825664');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:45:59.825664', '2023-12-05 08:45:59.825664')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:46:07.116108', '2023-12-05 08:46:07.116108');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:46:07.116108', '2023-12-05 08:46:07.116108')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:46:21.707263', '2023-12-05 08:46:21.707263');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:46:21.707263', '2023-12-05 08:46:21.707263')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:46:34.479059', '2023-12-05 08:46:34.479059');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:46:34.479059', '2023-12-05 08:46:34.479059')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":null}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:46:54.688476', '2023-12-05 08:46:54.688476');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:46:54.688476', '2023-12-05 08:46:54.688476')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:47:41.902923', '2023-12-05 08:47:41.902923');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:47:41.902923', '2023-12-05 08:47:41.902923')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":null}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:47:45.888428', '2023-12-05 08:47:45.888428');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:47:45.888428', '2023-12-05 08:47:45.888428')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:47:50.665370', '2023-12-05 08:47:50.665370');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:47:50.665370', '2023-12-05 08:47:50.665370')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:49:05.563813', '2023-12-05 08:49:05.563813');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:49:05.563813', '2023-12-05 08:49:05.563813')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:49:49.678210', '2023-12-05 08:49:49.678210');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:49:49.678210', '2023-12-05 08:49:49.678210')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:49:55.339936', '2023-12-05 08:49:55.339936');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:49:55.339936', '2023-12-05 08:49:55.339936')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:51:02.651081', '2023-12-05 08:51:02.651081');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:51:02.651081', '2023-12-05 08:51:02.651081')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:51:27.857638', '2023-12-05 08:51:27.857638');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:51:27.857638', '2023-12-05 08:51:27.857638')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:52:15.032726', '2023-12-05 08:52:15.032726');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:52:15.032726', '2023-12-05 08:52:15.032726')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:52:59.146669', '2023-12-05 08:52:59.146669');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:52:59.146669', '2023-12-05 08:52:59.146669')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:53:58.077132', '2023-12-05 08:53:58.077132');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:53:58.077132', '2023-12-05 08:53:58.077132')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:54:00.238622', '2023-12-05 08:54:00.238622');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:54:00.238622', '2023-12-05 08:54:00.238622')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:54:18.376716', '2023-12-05 08:54:18.376716');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:54:18.376716', '2023-12-05 08:54:18.376716')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
******************************************************************************************
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
******************************************************************************************
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:55:29.341862', '2023-12-05 08:55:29.341862');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:55:29.341862', '2023-12-05 08:55:29.341862')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
******************************************************************************************
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
******************************************************************************************
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:55:44.441363', '2023-12-05 08:55:44.441363');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:55:44.441363', '2023-12-05 08:55:44.441363')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
******************************************************************************************
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
******************************************************************************************
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:55:50.931781', '2023-12-05 08:55:50.931781');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:55:50.931781', '2023-12-05 08:55:50.931781')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
******************************************************************************************
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
******************************************************************************************
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:55:59.213490', '2023-12-05 08:55:59.213490');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:55:59.213490', '2023-12-05 08:55:59.213490')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
******************************************************************************************
["response", "success", "score"]
******************************************************************************************
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
******************************************************************************************
["response", "success", "score"]
******************************************************************************************
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:56:08.304568', '2023-12-05 08:56:08.304568');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:56:08.304568', '2023-12-05 08:56:08.304568')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
******************************************************************************************
#<XapiMiddleware::Result:0x000000010655f328 @response="The user answered", @success=true, @score=#<XapiMiddleware::Score:0x000000010655f260 @raw=50, @min=0, @max=nil>>
******************************************************************************************
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
******************************************************************************************
#<XapiMiddleware::Result:0x00000001067119f0 @response="The user answered", @success=true, @score=#<XapiMiddleware::Score:0x0000000106711978 @raw=50, @min=0, @max=nil>>
******************************************************************************************
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:56:13.745432', '2023-12-05 08:56:13.745432');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:56:13.745432', '2023-12-05 08:56:13.745432')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
******************************************************************************************
#<XapiMiddleware::Result:0x0000000105bbabb0 @response="The user answered", @success=true, @score=#<XapiMiddleware::Score:0x0000000105bba980 @raw=50, @min=0, @max=nil>>
******************************************************************************************
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
******************************************************************************************
#<XapiMiddleware::Result:0x0000000105c1b988 @response="The user answered", @success=true, @score=#<XapiMiddleware::Score:0x0000000105c1b938 @raw=50, @min=0, @max=nil>>
******************************************************************************************
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:56:24.701993', '2023-12-05 08:56:24.701993');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:56:24.701993', '2023-12-05 08:56:24.701993')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
******************************************************************************************
#<XapiMiddleware::Result:0x00000001054d4738 @response="The user answered", @success=true, @score=#<XapiMiddleware::Score:0x00000001054d4620 @raw=50, @min=0, @max=nil>>
******************************************************************************************
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
******************************************************************************************
#<XapiMiddleware::Result:0x0000000105676c08 @response="The user answered", @success=true, @score=#<XapiMiddleware::Score:0x0000000105676bb8 @raw=50, @min=0, @max=nil>>
******************************************************************************************
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:56:41.309944', '2023-12-05 08:56:41.309944');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:56:41.309944', '2023-12-05 08:56:41.309944')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:56:51.644198', '2023-12-05 08:56:51.644198');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:56:51.644198', '2023-12-05 08:56:51.644198')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:57:08.182923', '2023-12-05 08:57:08.182923');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:57:08.182923', '2023-12-05 08:57:08.182923')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:58:18.985395', '2023-12-05 08:58:18.985395');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:58:18.985395', '2023-12-05 08:58:18.985395')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:58:26.442937', '2023-12-05 08:58:26.442937');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:58:26.442937', '2023-12-05 08:58:26.442937')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:58:33.156630', '2023-12-05 08:58:33.156630');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:58:33.156630', '2023-12-05 08:58:33.156630')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:59:02.682475', '2023-12-05 08:59:02.682475');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:59:02.682475', '2023-12-05 08:59:02.682475')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:59:13.225704', '2023-12-05 08:59:13.225704');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 08:59:13.225704', '2023-12-05 08:59:13.225704')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.5ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:00:29.539761', '2023-12-05 09:00:29.539761');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:00:29.539761', '2023-12-05 09:00:29.539761')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:00:38.120752', '2023-12-05 09:00:38.120752');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:00:38.120752', '2023-12-05 09:00:38.120752')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:00:48.237549', '2023-12-05 09:00:48.237549');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:00:48.237549', '2023-12-05 09:00:48.237549')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:00:57.397747', '2023-12-05 09:00:57.397747');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:00:57.397747', '2023-12-05 09:00:57.397747')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:01:10.926585', '2023-12-05 09:01:10.926585');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:01:10.926585', '2023-12-05 09:01:10.926585')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:02:56.409827', '2023-12-05 09:02:56.409827');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:02:56.409827', '2023-12-05 09:02:56.409827')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:03:05.808598', '2023-12-05 09:03:05.808598');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:03:05.808598', '2023-12-05 09:03:05.808598')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:03:24.299673', '2023-12-05 09:03:24.299673');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:03:24.299673', '2023-12-05 09:03:24.299673')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:03:30.273425', '2023-12-05 09:03:30.273425');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:03:30.273425', '2023-12-05 09:03:30.273425')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:03:36.964995', '2023-12-05 09:03:36.964995');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:03:36.964995', '2023-12-05 09:03:36.964995')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:03:45.890539', '2023-12-05 09:03:45.890539');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:03:45.890539', '2023-12-05 09:03:45.890539')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:04:15.296907', '2023-12-05 09:04:15.296907');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:04:15.296907', '2023-12-05 09:04:15.296907')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:04:30.461699', '2023-12-05 09:04:30.461699');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:04:30.461699', '2023-12-05 09:04:30.461699')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:04:35.136824', '2023-12-05 09:04:35.136824');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:04:35.136824', '2023-12-05 09:04:35.136824')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:05:46.111106', '2023-12-05 09:05:46.111106');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:05:46.111106', '2023-12-05 09:05:46.111106')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:05:57.487820', '2023-12-05 09:05:57.487820');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:05:57.487820', '2023-12-05 09:05:57.487820')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":null}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:06:10.656103', '2023-12-05 09:06:10.656103');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:06:10.656103', '2023-12-05 09:06:10.656103')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":null}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:06:14.987680', '2023-12-05 09:06:14.987680');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:06:14.987680', '2023-12-05 09:06:14.987680')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":null}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:06:41.578866', '2023-12-05 09:06:41.578866');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:06:41.578866', '2023-12-05 09:06:41.578866')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:06:51.191853', '2023-12-05 09:06:51.191853');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:06:51.191853', '2023-12-05 09:06:51.191853')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:06:57.405718', '2023-12-05 09:06:57.405718');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:06:57.405718', '2023-12-05 09:06:57.405718')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":null}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:07:09.249242', '2023-12-05 09:07:09.249242');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:07:09.249242', '2023-12-05 09:07:09.249242')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:07:31.143547', '2023-12-05 09:07:31.143547');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:07:31.143547', '2023-12-05 09:07:31.143547')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:07:44.833717', '2023-12-05 09:07:44.833717');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:07:44.833717', '2023-12-05 09:07:44.833717')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:08:07.191044', '2023-12-05 09:08:07.191044');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:08:07.191044', '2023-12-05 09:08:07.191044')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:08:17.387461', '2023-12-05 09:08:17.387461');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:08:17.387461', '2023-12-05 09:08:17.387461')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:08:28.964390', '2023-12-05 09:08:28.964390');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:08:28.964390', '2023-12-05 09:08:28.964390')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:08:35.270399', '2023-12-05 09:08:35.270399');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:08:35.270399', '2023-12-05 09:08:35.270399')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:08:46.436285', '2023-12-05 09:08:46.436285');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:08:46.436285', '2023-12-05 09:08:46.436285')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:09:48.197815', '2023-12-05 09:09:48.197815');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:09:48.197815', '2023-12-05 09:09:48.197815')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:10:13.215977', '2023-12-05 09:10:13.215977');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:10:13.215977', '2023-12-05 09:10:13.215977')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:10:23.645297', '2023-12-05 09:10:23.645297');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:10:23.645297', '2023-12-05 09:10:23.645297')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:11:46.058460', '2023-12-05 09:11:46.058460');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:11:46.058460', '2023-12-05 09:11:46.058460')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"errors\":[\"Missing keys: score_max\"],\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:11:56.266294', '2023-12-05 09:11:56.266294');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:11:56.266294', '2023-12-05 09:11:56.266294')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"errors\":[\"Missing keys: score_max\"],\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:12:02.209258', '2023-12-05 09:12:02.209258');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:12:02.209258', '2023-12-05 09:12:02.209258')[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":null}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:12:07.805131', '2023-12-05 09:12:07.805131');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:12:07.805131', '2023-12-05 09:12:07.805131')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"errors\":[\"Missing keys: score_max\"],\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:12:18.874057', '2023-12-05 09:12:18.874057');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:12:18.874057', '2023-12-05 09:12:18.874057')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"errors\":[\"Missing keys: score_max\"],\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:12:37.606863', '2023-12-05 09:12:37.606863');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:12:37.606863', '2023-12-05 09:12:37.606863')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"errors\":[],\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:12:44.709316', '2023-12-05 09:12:44.709316');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:12:44.709316', '2023-12-05 09:12:44.709316')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"errors\":[\"Missing keys: score_max\"],\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":null}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:12:48.615842', '2023-12-05 09:12:48.615842');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:12:48.615842', '2023-12-05 09:12:48.615842')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"errors\":[],\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:14:27.067116', '2023-12-05 09:14:27.067116');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:14:27.067116', '2023-12-05 09:14:27.067116')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:15:00.961428', '2023-12-05 09:15:00.961428');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:15:00.961428', '2023-12-05 09:15:00.961428')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:15:14.115366', '2023-12-05 09:15:14.115366');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:15:14.115366', '2023-12-05 09:15:14.115366')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:15:20.524691', '2023-12-05 09:15:20.524691');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:15:20.524691', '2023-12-05 09:15:20.524691')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:15:47.965733', '2023-12-05 09:15:47.965733');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:15:47.965733', '2023-12-05 09:15:47.965733')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:15:54.810775', '2023-12-05 09:15:54.810775');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:15:54.810775', '2023-12-05 09:15:54.810775')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:16:00.214150', '2023-12-05 09:16:00.214150');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:16:00.214150', '2023-12-05 09:16:00.214150')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":null}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:16:06.792382', '2023-12-05 09:16:06.792382');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:16:06.792382', '2023-12-05 09:16:06.792382')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":\"true\",\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:16:10.355830', '2023-12-05 09:16:10.355830');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:16:10.355830', '2023-12-05 09:16:10.355830')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:19:49.744364', '2023-12-05 09:19:49.744364');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:19:49.744364', '2023-12-05 09:19:49.744364')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:19:58.299659', '2023-12-05 09:19:58.299659');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:19:58.299659', '2023-12-05 09:19:58.299659')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:20:05.035708', '2023-12-05 09:20:05.035708');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:20:05.035708', '2023-12-05 09:20:05.035708')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:20:14.147677', '2023-12-05 09:20:14.147677');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:20:14.147677', '2023-12-05 09:20:14.147677')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:20:33.129122', '2023-12-05 09:20:33.129122');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:20:33.129122', '2023-12-05 09:20:33.129122')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:22:32.542119', '2023-12-05 09:22:32.542119');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:22:32.542119', '2023-12-05 09:22:32.542119')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:22:44.584837', '2023-12-05 09:22:44.584837');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:22:44.584837', '2023-12-05 09:22:44.584837')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":null,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:23:39.803174', '2023-12-05 09:23:39.803174');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:23:39.803174', '2023-12-05 09:23:39.803174')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":null,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:23:56.673853', '2023-12-05 09:23:56.673853');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:23:56.673853', '2023-12-05 09:23:56.673853')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":null,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:25:16.857240', '2023-12-05 09:25:16.857240');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:25:16.857240', '2023-12-05 09:25:16.857240')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":null,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:25:26.853161', '2023-12-05 09:25:26.853161');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:25:26.853161', '2023-12-05 09:25:26.853161')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:25:36.191952', '2023-12-05 09:25:36.191952');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:25:36.191952', '2023-12-05 09:25:36.191952')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":null,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:25:50.081311', '2023-12-05 09:25:50.081311');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:25:50.081311', '2023-12-05 09:25:50.081311')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:25:56.907833', '2023-12-05 09:25:56.907833');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:25:56.907833', '2023-12-05 09:25:56.907833')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":null,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:26:05.066979', '2023-12-05 09:26:05.066979');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:26:05.066979', '2023-12-05 09:26:05.066979')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":null,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:26:10.849291', '2023-12-05 09:26:10.849291');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:26:10.849291', '2023-12-05 09:26:10.849291')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":null,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:26:41.673651', '2023-12-05 09:26:41.673651');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:26:41.673651', '2023-12-05 09:26:41.673651')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:26:59.293401', '2023-12-05 09:26:59.293401');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:26:59.293401', '2023-12-05 09:26:59.293401')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:27:05.036612', '2023-12-05 09:27:05.036612');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:27:05.036612', '2023-12-05 09:27:05.036612')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:32:26.710315', '2023-12-05 09:32:26.710315');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:32:26.710315', '2023-12-05 09:32:26.710315')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:32:34.536784', '2023-12-05 09:32:34.536784');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:32:34.536784', '2023-12-05 09:32:34.536784')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:32:38.076028', '2023-12-05 09:32:38.076028');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:32:38.076028', '2023-12-05 09:32:38.076028')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:32:44.337113', '2023-12-05 09:32:44.337113');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:32:44.337113', '2023-12-05 09:32:44.337113')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:32:49.783360', '2023-12-05 09:32:49.783360');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:32:49.783360', '2023-12-05 09:32:49.783360')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:46:03.739128', '2023-12-05 09:46:03.739128');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:46:03.739128', '2023-12-05 09:46:03.739128')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:46:11.415273', '2023-12-05 09:46:11.415273');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:46:11.415273', '2023-12-05 09:46:11.415273')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:48:41.590237', '2023-12-05 09:48:41.590237');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:48:41.590237', '2023-12-05 09:48:41.590237')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:48:56.231036', '2023-12-05 09:48:56.231036');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:48:56.231036', '2023-12-05 09:48:56.231036')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:49:02.167214', '2023-12-05 09:49:02.167214');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:49:02.167214', '2023-12-05 09:49:02.167214')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:49:07.155325', '2023-12-05 09:49:07.155325');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:49:07.155325', '2023-12-05 09:49:07.155325')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:49:11.351872', '2023-12-05 09:49:11.351872');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 09:49:11.351872', '2023-12-05 09:49:11.351872')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 10:04:20.654624', '2023-12-05 10:04:20.654624');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 10:04:20.654624', '2023-12-05 10:04:20.654624')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.5ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 10:46:00.205765', '2023-12-05 10:46:00.205765');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 10:46:00.205765', '2023-12-05 10:46:00.205765')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 10:46:10.368263', '2023-12-05 10:46:10.368263');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 10:46:10.368263', '2023-12-05 10:46:10.368263')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 10:57:30.858581', '2023-12-05 10:57:30.858581');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 10:57:30.858581', '2023-12-05 10:57:30.858581')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 10:57:35.010920', '2023-12-05 10:57:35.010920');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 10:57:35.010920', '2023-12-05 10:57:35.010920')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:00:16.427947', '2023-12-05 11:00:16.427947');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:00:16.427947', '2023-12-05 11:00:16.427947')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:00:23.357518', '2023-12-05 11:00:23.357518');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:00:23.357518', '2023-12-05 11:00:23.357518')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "p://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"p://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:00:28.395150', '2023-12-05 11:00:28.395150');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:00:28.395150', '2023-12-05 11:00:28.395150')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:01:28.783951', '2023-12-05 11:01:28.783951');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:01:28.783951', '2023-12-05 11:01:28.783951')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:01:42.326867', '2023-12-05 11:01:42.326867');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:01:42.326867', '2023-12-05 11:01:42.326867')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:02:23.109733', '2023-12-05 11:02:23.109733');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:02:23.109733', '2023-12-05 11:02:23.109733')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:02:46.092358', '2023-12-05 11:02:46.092358');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:02:46.092358', '2023-12-05 11:02:46.092358')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "htt://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"htt://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:02:51.290501', '2023-12-05 11:02:51.290501');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:02:51.290501', '2023-12-05 11:02:51.290501')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:02:54.519697', '2023-12-05 11:02:54.519697');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:02:54.519697', '2023-12-05 11:02:54.519697')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "https://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"https://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:02:58.600345', '2023-12-05 11:02:58.600345');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:02:58.600345', '2023-12-05 11:02:58.600345')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:03:25.104818', '2023-12-05 11:03:25.104818');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:03:25.104818', '2023-12-05 11:03:25.104818')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:03:55.941065', '2023-12-05 11:03:55.941065');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:03:55.941065', '2023-12-05 11:03:55.941065')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:04:11.091842', '2023-12-05 11:04:11.091842');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:04:11.091842', '2023-12-05 11:04:11.091842')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:04:19.698397', '2023-12-05 11:04:19.698397');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:04:19.698397', '2023-12-05 11:04:19.698397')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:04:40.289587', '2023-12-05 11:04:40.289587');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:04:40.289587', '2023-12-05 11:04:40.289587')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:05:29.346987', '2023-12-05 11:05:29.346987');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:05:29.346987', '2023-12-05 11:05:29.346987')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:06:33.586920', '2023-12-05 11:06:33.586920');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:06:33.586920', '2023-12-05 11:06:33.586920')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:07:16.778825', '2023-12-05 11:07:16.778825');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:07:16.778825', '2023-12-05 11:07:16.778825')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:07:31.691381', '2023-12-05 11:07:31.691381');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:07:31.691381', '2023-12-05 11:07:31.691381')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:07:48.652390', '2023-12-05 11:07:48.652390');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:07:48.652390', '2023-12-05 11:07:48.652390')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:10:00.327040', '2023-12-05 11:10:00.327040');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:10:00.327040', '2023-12-05 11:10:00.327040')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:10:08.189815', '2023-12-05 11:10:08.189815');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:10:08.189815', '2023-12-05 11:10:08.189815')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:12:04.391483', '2023-12-05 11:12:04.391483');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:12:04.391483', '2023-12-05 11:12:04.391483')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:12:15.471860', '2023-12-05 11:12:15.471860');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:12:15.471860', '2023-12-05 11:12:15.471860')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "https://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"https://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:12:19.232876', '2023-12-05 11:12:19.232876');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:12:19.232876', '2023-12-05 11:12:19.232876')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:12:58.771611', '2023-12-05 11:12:58.771611');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:12:58.771611', '2023-12-05 11:12:58.771611')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:13:10.440802', '2023-12-05 11:13:10.440802');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:13:10.440802', '2023-12-05 11:13:10.440802')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:13:14.760754', '2023-12-05 11:13:14.760754');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:13:14.760754', '2023-12-05 11:13:14.760754')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "p://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"p://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:13:20.177725', '2023-12-05 11:13:20.177725');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:13:20.177725', '2023-12-05 11:13:20.177725')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:13:26.001492', '2023-12-05 11:13:26.001492');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:13:26.001492', '2023-12-05 11:13:26.001492')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "httv://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"httv://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:13:32.004312', '2023-12-05 11:13:32.004312');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:13:32.004312', '2023-12-05 11:13:32.004312')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "John Doe",
  "verb_id": "http://example/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"John Doe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:20:07.610075', '2023-12-05 11:20:07.610075');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:20:07.610075', '2023-12-05 11:20:07.610075')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:20:27.838766', '2023-12-05 11:20:27.838766');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:20:27.838766', '2023-12-05 11:20:27.838766')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:23:22.392918', '2023-12-05 11:23:22.392918');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:23:22.392918', '2023-12-05 11:23:22.392918')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:24:51.193737', '2023-12-05 11:24:51.193737');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:24:51.193737', '2023-12-05 11:24:51.193737')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:24:57.251040', '2023-12-05 11:24:57.251040');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:24:57.251040', '2023-12-05 11:24:57.251040')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:25:18.654349', '2023-12-05 11:25:18.654349');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:25:18.654349', '2023-12-05 11:25:18.654349')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:25:24.036274', '2023-12-05 11:25:24.036274');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:25:24.036274', '2023-12-05 11:25:24.036274')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:25:36.798970', '2023-12-05 11:25:36.798970');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:25:36.798970', '2023-12-05 11:25:36.798970')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:25:59.384305', '2023-12-05 11:25:59.384305');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:25:59.384305', '2023-12-05 11:25:59.384305')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:26:08.397185', '2023-12-05 11:26:08.397185');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:26:08.397185', '2023-12-05 11:26:08.397185')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:26:32.933838', '2023-12-05 11:26:32.933838');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:26:32.933838', '2023-12-05 11:26:32.933838')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:26:51.326983', '2023-12-05 11:26:51.326983');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:26:51.326983', '2023-12-05 11:26:51.326983')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:27:07.062531', '2023-12-05 11:27:07.062531');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:27:07.062531', '2023-12-05 11:27:07.062531')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Jøhn De",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"jøhn DœE\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:27:38.119911', '2023-12-05 11:27:38.119911');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:27:38.119911', '2023-12-05 11:27:38.119911')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Jøhn De",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"jøhn DœE\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:27:47.116475', '2023-12-05 11:27:47.116475');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:27:47.116475', '2023-12-05 11:27:47.116475')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Jøhn De",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"jøhn DœE\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:28:15.419382', '2023-12-05 11:28:15.419382');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:28:15.419382', '2023-12-05 11:28:15.419382')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Jøhn Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"jøhn DœE\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:28:30.821672', '2023-12-05 11:28:30.821672');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:28:30.821672', '2023-12-05 11:28:30.821672')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Jøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"jøhnNÿ DœE\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:28:40.965574', '2023-12-05 11:28:40.965574');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:28:40.965574', '2023-12-05 11:28:40.965574')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Jøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"jøhnNÿ DœE\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:30:06.682916', '2023-12-05 11:30:06.682916');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:30:06.682916', '2023-12-05 11:30:06.682916')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Jøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"jøhnNÿ DœE\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:30:11.562331', '2023-12-05 11:30:11.562331');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:30:11.562331', '2023-12-05 11:30:11.562331')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Jøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"jøhnNÿ DœE\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:30:20.355924', '2023-12-05 11:30:20.355924');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:30:20.355924', '2023-12-05 11:30:20.355924')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Jøhnnÿ De",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"jøhnNÿ DœE\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:30:34.311571', '2023-12-05 11:30:34.311571');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:30:34.311571', '2023-12-05 11:30:34.311571')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Jøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"jøhnNÿ DœE\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:30:47.323524', '2023-12-05 11:30:47.323524');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:30:47.323524', '2023-12-05 11:30:47.323524')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"ÿøhnNÿ DœE\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:31:44.799581', '2023-12-05 11:31:44.799581');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 11:31:44.799581', '2023-12-05 11:31:44.799581')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"ÿøhnNÿ DœE\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:03:21.979531', '2023-12-05 13:03:21.979531');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:03:21.979531', '2023-12-05 13:03:21.979531')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"ÿøhnNÿ DœE\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:03:41.215591', '2023-12-05 13:03:41.215591');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:03:41.215591', '2023-12-05 13:03:41.215591')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"ÿøhnNÿ DœE\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:04:13.187192', '2023-12-05 13:04:13.187192');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:04:13.187192', '2023-12-05 13:04:13.187192')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"ÿøhnNÿ DœE\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null,
  "actor": {
    "name": "ÿøhnNÿ DœE",
    "mbox": null
  }
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:05:08.674334', '2023-12-05 13:05:08.674334');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:05:08.674334', '2023-12-05 13:05:08.674334')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:07:12.711064', '2023-12-05 13:07:12.711064');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:07:12.711064', '2023-12-05 13:07:12.711064')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:07:28.396938', '2023-12-05 13:07:28.396938');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:07:28.396938', '2023-12-05 13:07:28.396938')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:08:09.700932', '2023-12-05 13:08:09.700932');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:08:09.700932', '2023-12-05 13:08:09.700932')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:08:35.645537', '2023-12-05 13:08:35.645537');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:08:35.645537', '2023-12-05 13:08:35.645537')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:08:55.352337', '2023-12-05 13:08:55.352337');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:08:55.352337', '2023-12-05 13:08:55.352337')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:09:05.192816', '2023-12-05 13:09:05.192816');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:09:05.192816', '2023-12-05 13:09:05.192816')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:09:13.946221', '2023-12-05 13:09:13.946221');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:09:13.946221', '2023-12-05 13:09:13.946221')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:09:30.990590', '2023-12-05 13:09:30.990590');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:09:30.990590', '2023-12-05 13:09:30.990590')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ dœe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:09:58.149394', '2023-12-05 13:09:58.149394');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:09:58.149394', '2023-12-05 13:09:58.149394')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:10:13.246849', '2023-12-05 13:10:13.246849');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:10:13.246849', '2023-12-05 13:10:13.246849')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:10:21.346689', '2023-12-05 13:10:21.346689');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:10:21.346689', '2023-12-05 13:10:21.346689')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:10:52.822026', '2023-12-05 13:10:52.822026');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:10:52.822026', '2023-12-05 13:10:52.822026')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:11:18.781530', '2023-12-05 13:11:18.781530');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:11:18.781530', '2023-12-05 13:11:18.781530')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.5ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:15:18.403781', '2023-12-05 13:15:18.403781');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:15:18.403781', '2023-12-05 13:15:18.403781')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:15:43.768042', '2023-12-05 13:15:43.768042');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:15:43.768042', '2023-12-05 13:15:43.768042')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:16:05.550447', '2023-12-05 13:16:05.550447');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:16:05.550447', '2023-12-05 13:16:05.550447')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:16:11.242727', '2023-12-05 13:16:11.242727');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:16:11.242727', '2023-12-05 13:16:11.242727')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:17:01.670512', '2023-12-05 13:17:01.670512');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:17:01.670512', '2023-12-05 13:17:01.670512')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:17:05.977164', '2023-12-05 13:17:05.977164');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:17:05.977164', '2023-12-05 13:17:05.977164')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.c\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:17:09.191339', '2023-12-05 13:17:09.191339');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:17:09.191339', '2023-12-05 13:17:09.191339')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.5ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:18:50.459692', '2023-12-05 13:18:50.459692');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:18:50.459692', '2023-12-05 13:18:50.459692')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:18:55.288307', '2023-12-05 13:18:55.288307');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:18:55.288307', '2023-12-05 13:18:55.288307')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:19:00.188432', '2023-12-05 13:19:00.188432');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:19:00.188432', '2023-12-05 13:19:00.188432')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.co\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:19:04.300907', '2023-12-05 13:19:04.300907');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:19:04.300907', '2023-12-05 13:19:04.300907')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:19:10.169560', '2023-12-05 13:19:10.169560');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:19:10.169560', '2023-12-05 13:19:10.169560')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:19:53.980777', '2023-12-05 13:19:53.980777');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:19:53.980777', '2023-12-05 13:19:53.980777')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:19:55.808462', '2023-12-05 13:19:55.808462');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:19:55.808462', '2023-12-05 13:19:55.808462')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:20:01.522198', '2023-12-05 13:20:01.522198');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:20:01.522198', '2023-12-05 13:20:01.522198')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:20:05.811869', '2023-12-05 13:20:05.811869');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:20:05.811869', '2023-12-05 13:20:05.811869')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.co\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:20:09.089921', '2023-12-05 13:20:09.089921');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:20:09.089921', '2023-12-05 13:20:09.089921')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:22:26.780715', '2023-12-05 13:22:26.780715');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:22:26.780715', '2023-12-05 13:22:26.780715')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:25:29.168616', '2023-12-05 13:25:29.168616');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:25:29.168616', '2023-12-05 13:25:29.168616')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\"},\"result\":null}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:26:45.967659', '2023-12-05 13:26:45.967659');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:26:45.967659', '2023-12-05 13:26:45.967659')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:27:03.836657', '2023-12-05 13:27:03.836657');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:27:03.836657', '2023-12-05 13:27:03.836657')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:27:16.263064', '2023-12-05 13:27:16.263064');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:27:16.263064', '2023-12-05 13:27:16.263064')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:27:22.921902', '2023-12-05 13:27:22.921902');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:27:22.921902', '2023-12-05 13:27:22.921902')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:27:30.602993', '2023-12-05 13:27:30.602993');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:27:30.602993', '2023-12-05 13:27:30.602993')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:27:35.858092', '2023-12-05 13:27:35.858092');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:27:35.858092', '2023-12-05 13:27:35.858092')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:27:43.191360', '2023-12-05 13:27:43.191360');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:27:43.191360', '2023-12-05 13:27:43.191360')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:27:47.694990', '2023-12-05 13:27:47.694990');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:27:47.694990', '2023-12-05 13:27:47.694990')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:28:21.832827', '2023-12-05 13:28:21.832827');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:28:21.832827', '2023-12-05 13:28:21.832827')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:29:13.274338', '2023-12-05 13:29:13.274338');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:29:13.274338', '2023-12-05 13:29:13.274338')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:29:26.370701', '2023-12-05 13:29:26.370701');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:29:26.370701', '2023-12-05 13:29:26.370701')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:29:34.975332', '2023-12-05 13:29:34.975332');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:29:34.975332', '2023-12-05 13:29:34.975332')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:30:24.967853', '2023-12-05 13:30:24.967853');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:30:24.967853', '2023-12-05 13:30:24.967853')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:35:53.188834', '2023-12-05 13:35:53.188834');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:35:53.188834', '2023-12-05 13:35:53.188834')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:36:14.854614', '2023-12-05 13:36:14.854614');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:36:14.854614', '2023-12-05 13:36:14.854614')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:37:11.521564', '2023-12-05 13:37:11.521564');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:37:11.521564', '2023-12-05 13:37:11.521564')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:37:19.139112', '2023-12-05 13:37:19.139112');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:37:19.139112', '2023-12-05 13:37:19.139112')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:37:27.280571', '2023-12-05 13:37:27.280571');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:37:27.280571', '2023-12-05 13:37:27.280571')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.5ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:46:17.020226', '2023-12-05 13:46:17.020226');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:46:17.020226', '2023-12-05 13:46:17.020226')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"object_type\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:46:24.123897', '2023-12-05 13:46:24.123897');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:46:24.123897', '2023-12-05 13:46:24.123897')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"object_type\":\"GEgent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:46:59.653648', '2023-12-05 13:46:59.653648');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:46:59.653648', '2023-12-05 13:46:59.653648')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"object_type\":\"Group\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:47:11.909824', '2023-12-05 13:47:11.909824');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:47:11.909824', '2023-12-05 13:47:11.909824')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"object_type\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:48:46.922065', '2023-12-05 13:48:46.922065');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:48:46.922065', '2023-12-05 13:48:46.922065')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"object_type\":\"Group\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:48:53.725020', '2023-12-05 13:48:53.725020');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:48:53.725020', '2023-12-05 13:48:53.725020')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"object_type\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:48:58.309301', '2023-12-05 13:48:58.309301');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:48:58.309301', '2023-12-05 13:48:58.309301')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:49:47.064034', '2023-12-05 13:49:47.064034');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:49:47.064034', '2023-12-05 13:49:47.064034')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.5ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:50:20.634360', '2023-12-05 13:50:20.634360');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:50:20.634360', '2023-12-05 13:50:20.634360')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:50:28.237807', '2023-12-05 13:50:28.237807');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:50:28.237807', '2023-12-05 13:50:28.237807')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"object_type\":\"Group\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:50:49.638759', '2023-12-05 13:50:49.638759');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:50:49.638759', '2023-12-05 13:50:49.638759')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:51:24.466880', '2023-12-05 13:51:24.466880');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:51:24.466880', '2023-12-05 13:51:24.466880')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"object_type\":\"Group\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.5ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:53:52.847463', '2023-12-05 13:53:52.847463');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:53:52.847463', '2023-12-05 13:53:52.847463')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"object_type\":\"Group\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:54:08.446372', '2023-12-05 13:54:08.446372');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:54:08.446372', '2023-12-05 13:54:08.446372')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"object_type\":null,\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:54:52.707910', '2023-12-05 13:54:52.707910');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:54:52.707910', '2023-12-05 13:54:52.707910')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"object_type\":\"Group\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:55:17.256200', '2023-12-05 13:55:17.256200');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:55:17.256200', '2023-12-05 13:55:17.256200')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"object_type\":\"Group\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:55:44.143976', '2023-12-05 13:55:44.143976');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:55:44.143976', '2023-12-05 13:55:44.143976')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"object_type\":\"Group\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:56:53.375524', '2023-12-05 13:56:53.375524');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:56:53.375524', '2023-12-05 13:56:53.375524')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"object_type\":\"Group\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:58:43.553410', '2023-12-05 13:58:43.553410');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:58:43.553410', '2023-12-05 13:58:43.553410')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":\"{\\\"objectType\\\":\\\"Group\\\",\\\"name\\\":\\\"Ÿøhnnÿ Dœe\\\",\\\"mbox\\\":\\\"mailto:yohnny.doe@localhost.com\\\",\\\"account\\\":{\\\"name\\\":\\\"JohnnyAccount#1\\\"}}\",\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:58:50.778983', '2023-12-05 13:58:50.778983');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:58:50.778983', '2023-12-05 13:58:50.778983')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Group\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:59:16.558418', '2023-12-05 13:59:16.558418');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 13:59:16.558418', '2023-12-05 13:59:16.558418')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Group\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.5ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:02:18.064209', '2023-12-05 14:02:18.064209');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:02:18.064209', '2023-12-05 14:02:18.064209')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Group\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:02:23.666957', '2023-12-05 14:02:23.666957');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:02:23.666957', '2023-12-05 14:02:23.666957')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:02:28.474607', '2023-12-05 14:02:28.474607');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:02:28.474607', '2023-12-05 14:02:28.474607')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:05:52.254780', '2023-12-05 14:05:52.254780');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:05:52.254780', '2023-12-05 14:05:52.254780')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:06:13.743094', '2023-12-05 14:06:13.743094');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:06:13.743094', '2023-12-05 14:06:13.743094')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:13:22.223498', '2023-12-05 14:13:22.223498');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:13:22.223498', '2023-12-05 14:13:22.223498')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"home_page\":null,\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:13:30.337381', '2023-12-05 14:13:30.337381');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:13:30.337381', '2023-12-05 14:13:30.337381')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"home_page\":null,\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:16:40.732559', '2023-12-05 14:16:40.732559');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:16:40.732559', '2023-12-05 14:16:40.732559')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"home_page\":null,\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:16:55.358763', '2023-12-05 14:16:55.358763');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:16:55.358763', '2023-12-05 14:16:55.358763')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:17:06.776607', '2023-12-05 14:17:06.776607');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:17:06.776607', '2023-12-05 14:17:06.776607')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"home_page\":\"http://example.com/JohnnyAccount#1\",\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:17:29.511472', '2023-12-05 14:17:29.511472');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:17:29.511472', '2023-12-05 14:17:29.511472')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"homePage\":\"http://example.com/JohnnyAccount#1\",\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:17:38.154998', '2023-12-05 14:17:38.154998');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:17:38.154998', '2023-12-05 14:17:38.154998')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"homePage\":\"http://example.com/JohnnyAccount#1\",\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:18:02.846743', '2023-12-05 14:18:02.846743');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:18:02.846743', '2023-12-05 14:18:02.846743')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"homePage\":null,\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:18:17.258533', '2023-12-05 14:18:17.258533');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:18:17.258533', '2023-12-05 14:18:17.258533')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"homePage\":null,\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:19:16.513762', '2023-12-05 14:19:16.513762');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:19:16.513762', '2023-12-05 14:19:16.513762')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"homePage\":null,\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:19:39.963293', '2023-12-05 14:19:39.963293');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:19:39.963293', '2023-12-05 14:19:39.963293')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"homePage\":null,\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:19:45.330111', '2023-12-05 14:19:45.330111');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:19:45.330111', '2023-12-05 14:19:45.330111')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"homePage\":null,\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:20:22.687175', '2023-12-05 14:20:22.687175');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:20:22.687175', '2023-12-05 14:20:22.687175')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:25:31.425160', '2023-12-05 14:25:31.425160');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:25:31.425160', '2023-12-05 14:25:31.425160')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:25:50.874494', '2023-12-05 14:25:50.874494');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:25:50.874494', '2023-12-05 14:25:50.874494')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:25:55.561149', '2023-12-05 14:25:55.561149');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:25:55.561149', '2023-12-05 14:25:55.561149')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:26:53.997317', '2023-12-05 14:26:53.997317');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:26:53.997317', '2023-12-05 14:26:53.997317')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:28:13.008251', '2023-12-05 14:28:13.008251');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:28:13.008251', '2023-12-05 14:28:13.008251')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:29:17.415359', '2023-12-05 14:29:17.415359');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:29:17.415359', '2023-12-05 14:29:17.415359')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:29:32.287006', '2023-12-05 14:29:32.287006');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:29:32.287006', '2023-12-05 14:29:32.287006')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:29:37.946229', '2023-12-05 14:29:37.946229');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:29:37.946229', '2023-12-05 14:29:37.946229')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:29:51.734875', '2023-12-05 14:29:51.734875');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:29:51.734875', '2023-12-05 14:29:51.734875')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:30:00.004717', '2023-12-05 14:30:00.004717');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:30:00.004717', '2023-12-05 14:30:00.004717')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":null,\"openid\":null},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:30:46.906656', '2023-12-05 14:30:46.906656');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:30:46.906656', '2023-12-05 14:30:46.906656')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:31:22.912304', '2023-12-05 14:31:22.912304');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:31:22.912304', '2023-12-05 14:31:22.912304')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:31:30.499699', '2023-12-05 14:31:30.499699');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:31:30.499699', '2023-12-05 14:31:30.499699')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"}},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:31:35.537628', '2023-12-05 14:31:35.537628');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:31:35.537628', '2023-12-05 14:31:35.537628')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:31:40.771154', '2023-12-05 14:31:40.771154');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:31:40.771154', '2023-12-05 14:31:40.771154')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:32:06.752673', '2023-12-05 14:32:06.752673');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:32:06.752673', '2023-12-05 14:32:06.752673')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:35:17.420114', '2023-12-05 14:35:17.420114');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:35:17.420114', '2023-12-05 14:35:17.420114')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:35:36.419639', '2023-12-05 14:35:36.419639');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:35:36.419639', '2023-12-05 14:35:36.419639')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:35:41.562631', '2023-12-05 14:35:41.562631');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:35:41.562631', '2023-12-05 14:35:41.562631')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:59:34.637000', '2023-12-05 14:59:34.637000');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:59:34.637000', '2023-12-05 14:59:34.637000')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:59:39.238878', '2023-12-05 14:59:39.238878');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 14:59:39.238878', '2023-12-05 14:59:39.238878')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:00:39.126559', '2023-12-05 15:00:39.126559');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:00:39.126559', '2023-12-05 15:00:39.126559')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:01:22.120059', '2023-12-05 15:01:22.120059');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:01:22.120059', '2023-12-05 15:01:22.120059')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:01:34.736532', '2023-12-05 15:01:34.736532');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:01:34.736532', '2023-12-05 15:01:34.736532')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{\"name\":null}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:02:13.150769', '2023-12-05 15:02:13.150769');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:02:13.150769', '2023-12-05 15:02:13.150769')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:02:29.403906', '2023-12-05 15:02:29.403906');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:02:29.403906', '2023-12-05 15:02:29.403906')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:05:19.473975', '2023-12-05 15:05:19.473975');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:05:19.473975', '2023-12-05 15:05:19.473975')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:05:26.260788', '2023-12-05 15:05:26.260788');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:05:26.260788', '2023-12-05 15:05:26.260788')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:05:36.074381', '2023-12-05 15:05:36.074381');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:05:36.074381', '2023-12-05 15:05:36.074381')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.6ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:05:47.842412', '2023-12-05 15:05:47.842412');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:05:47.842412', '2023-12-05 15:05:47.842412')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:06:04.080326', '2023-12-05 15:06:04.080326');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:06:04.080326', '2023-12-05 15:06:04.080326')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:07:11.849605', '2023-12-05 15:07:11.849605');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:07:11.849605', '2023-12-05 15:07:11.849605')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"id\":\"http://example.com/object\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:15:48.512203', '2023-12-05 15:15:48.512203');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:15:48.512203', '2023-12-05 15:15:48.512203')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:19:31.200375', '2023-12-05 15:19:31.200375');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:19:31.200375', '2023-12-05 15:19:31.200375')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:19:40.434239', '2023-12-05 15:19:40.434239');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:19:40.434239', '2023-12-05 15:19:40.434239')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:19:51.478895', '2023-12-05 15:19:51.478895');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:19:51.478895', '2023-12-05 15:19:51.478895')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"Activity\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:21:30.206616', '2023-12-05 15:21:30.206616');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:21:30.206616', '2023-12-05 15:21:30.206616')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"Activity\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:23:23.432118', '2023-12-05 15:23:23.432118');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:23:23.432118', '2023-12-05 15:23:23.432118')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"Activity\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:23:29.992657', '2023-12-05 15:23:29.992657');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:23:29.992657', '2023-12-05 15:23:29.992657')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"Activity\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:23:33.670349', '2023-12-05 15:23:33.670349');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:23:33.670349', '2023-12-05 15:23:33.670349')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"Activity\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:23:36.093147', '2023-12-05 15:23:36.093147');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:23:36.093147', '2023-12-05 15:23:36.093147')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"Activity\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:23:38.082694', '2023-12-05 15:23:38.082694');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:23:38.082694', '2023-12-05 15:23:38.082694')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"Activity\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:23:39.893495', '2023-12-05 15:23:39.893495');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:23:39.893495', '2023-12-05 15:23:39.893495')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"Activity\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:23:41.642698', '2023-12-05 15:23:41.642698');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:23:41.642698', '2023-12-05 15:23:41.642698')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"Activity\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:23:43.709182', '2023-12-05 15:23:43.709182');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:23:43.709182', '2023-12-05 15:23:43.709182')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"Activity\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:38:31.805727', '2023-12-05 15:38:31.805727');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:38:31.805727', '2023-12-05 15:38:31.805727')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"Activity\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:39:48.486638', '2023-12-05 15:39:48.486638');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:39:48.486638', '2023-12-05 15:39:48.486638')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"Activity\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:40:11.260196', '2023-12-05 15:40:11.260196');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:40:11.260196', '2023-12-05 15:40:11.260196')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"Activity\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:40:17.051794', '2023-12-05 15:40:17.051794');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:40:17.051794', '2023-12-05 15:40:17.051794')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"Activity\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:40:50.105671', '2023-12-05 15:40:50.105671');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:40:50.105671', '2023-12-05 15:40:50.105671')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:41:49.431924', '2023-12-05 15:41:49.431924');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:41:49.431924', '2023-12-05 15:41:49.431924')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:42:08.312840', '2023-12-05 15:42:08.312840');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:42:08.312840', '2023-12-05 15:42:08.312840')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:42:17.656725', '2023-12-05 15:42:17.656725');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:42:17.656725', '2023-12-05 15:42:17.656725')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:42:22.159189', '2023-12-05 15:42:22.159189');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:42:22.159189', '2023-12-05 15:42:22.159189')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:42:28.964578', '2023-12-05 15:42:28.964578');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:42:28.964578', '2023-12-05 15:42:28.964578')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:42:44.749153', '2023-12-05 15:42:44.749153');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:42:44.749153', '2023-12-05 15:42:44.749153')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:43:01.256147', '2023-12-05 15:43:01.256147');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:43:01.256147', '2023-12-05 15:43:01.256147')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:44:52.362583', '2023-12-05 15:44:52.362583');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:44:52.362583', '2023-12-05 15:44:52.362583')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:44:59.469205', '2023-12-05 15:44:59.469205');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:44:59.469205', '2023-12-05 15:44:59.469205')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:45:04.083266', '2023-12-05 15:45:04.083266');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:45:04.083266', '2023-12-05 15:45:04.083266')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:46:07.768065', '2023-12-05 15:46:07.768065');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:46:07.768065', '2023-12-05 15:46:07.768065')[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:46:41.632274', '2023-12-05 15:46:41.632274');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:46:41.632274', '2023-12-05 15:46:41.632274')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:46:50.231517', '2023-12-05 15:46:50.231517');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:46:50.231517', '2023-12-05 15:46:50.231517')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:47:11.310310', '2023-12-05 15:47:11.310310');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:47:11.310310', '2023-12-05 15:47:11.310310')[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:47:42.444624', '2023-12-05 15:47:42.444624');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:47:42.444624', '2023-12-05 15:47:42.444624')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:47:46.195061', '2023-12-05 15:47:46.195061');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:47:46.195061', '2023-12-05 15:47:46.195061')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:48:17.946550', '2023-12-05 15:48:17.946550');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:48:17.946550', '2023-12-05 15:48:17.946550')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:48:40.319171', '2023-12-05 15:48:40.319171');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:48:40.319171', '2023-12-05 15:48:40.319171')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:48:50.151238', '2023-12-05 15:48:50.151238');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:48:50.151238', '2023-12-05 15:48:50.151238')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:49:14.507200', '2023-12-05 15:49:14.507200');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:49:14.507200', '2023-12-05 15:49:14.507200')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:56:35.741643', '2023-12-05 15:56:35.741643');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:56:35.741643', '2023-12-05 15:56:35.741643')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:56:59.709844', '2023-12-05 15:56:59.709844');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:56:59.709844', '2023-12-05 15:56:59.709844')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:57:35.110568', '2023-12-05 15:57:35.110568');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:57:35.110568', '2023-12-05 15:57:35.110568')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:58:21.712987', '2023-12-05 15:58:21.712987');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:58:21.712987', '2023-12-05 15:58:21.712987')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\"},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:58:30.658915', '2023-12-05 15:58:30.658915');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:58:30.658915', '2023-12-05 15:58:30.658915')[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\"},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:58:57.973146', '2023-12-05 15:58:57.973146');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:58:57.973146', '2023-12-05 15:58:57.973146')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:59:07.805171', '2023-12-05 15:59:07.805171');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:59:07.805171', '2023-12-05 15:59:07.805171')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:59:12.920425', '2023-12-05 15:59:12.920425');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:59:12.920425', '2023-12-05 15:59:12.920425')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"Activity\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:59:23.884214', '2023-12-05 15:59:23.884214');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:59:23.884214', '2023-12-05 15:59:23.884214')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\",\"definition\":{}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:59:30.931524', '2023-12-05 15:59:30.931524');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:59:30.931524', '2023-12-05 15:59:30.931524')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\"},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:59:36.024311', '2023-12-05 15:59:36.024311');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 15:59:36.024311', '2023-12-05 15:59:36.024311')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:00:16.317742', '2023-12-05 16:00:16.317742');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:00:16.317742', '2023-12-05 16:00:16.317742')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:01:15.475704', '2023-12-05 16:01:15.475704');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:01:15.475704', '2023-12-05 16:01:15.475704')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "bob",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"id\":\"bob\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:01:28.280261', '2023-12-05 16:01:28.280261');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:01:28.280261', '2023-12-05 16:01:28.280261')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:02:03.134720', '2023-12-05 16:02:03.134720');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:02:03.134720', '2023-12-05 16:02:03.134720')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:02:05.144380', '2023-12-05 16:02:05.144380');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:02:05.144380', '2023-12-05 16:02:05.144380')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:02:18.643595', '2023-12-05 16:02:18.643595');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:02:18.643595', '2023-12-05 16:02:18.643595')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:02:21.118213', '2023-12-05 16:02:21.118213');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:02:21.118213', '2023-12-05 16:02:21.118213')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:03:02.485254', '2023-12-05 16:03:02.485254');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:03:02.485254', '2023-12-05 16:03:02.485254')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:03:16.742180', '2023-12-05 16:03:16.742180');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:03:16.742180', '2023-12-05 16:03:16.742180')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:03:21.229950', '2023-12-05 16:03:21.229950');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:03:21.229950', '2023-12-05 16:03:21.229950')[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:04:57.251374', '2023-12-05 16:04:57.251374');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:04:57.251374', '2023-12-05 16:04:57.251374')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:05:06.543893', '2023-12-05 16:05:06.543893');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:05:06.543893', '2023-12-05 16:05:06.543893')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:05:33.971713', '2023-12-05 16:05:33.971713');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:05:33.971713', '2023-12-05 16:05:33.971713')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:07:04.891068', '2023-12-05 16:07:04.891068');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:07:04.891068', '2023-12-05 16:07:04.891068')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:07:16.331190', '2023-12-05 16:07:16.331190');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:07:16.331190', '2023-12-05 16:07:16.331190')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"definition\":{},\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:07:41.380773', '2023-12-05 16:07:41.380773');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:07:41.380773', '2023-12-05 16:07:41.380773')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:08:24.722629', '2023-12-05 16:08:24.722629');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:08:24.722629', '2023-12-05 16:08:24.722629')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:08:28.923707', '2023-12-05 16:08:28.923707');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:08:28.923707', '2023-12-05 16:08:28.923707')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:08:44.129586', '2023-12-05 16:08:44.129586');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:08:44.129586', '2023-12-05 16:08:44.129586')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:08:55.009000', '2023-12-05 16:08:55.009000');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:08:55.009000', '2023-12-05 16:08:55.009000')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"id\":\"http://example.com/object\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:09:04.671172', '2023-12-05 16:09:04.671172');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:09:04.671172', '2023-12-05 16:09:04.671172')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:09:10.397203', '2023-12-05 16:09:10.397203');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:09:10.397203', '2023-12-05 16:09:10.397203')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:09:54.207692', '2023-12-05 16:09:54.207692');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:09:54.207692', '2023-12-05 16:09:54.207692')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.5ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:10:25.224553', '2023-12-05 16:10:25.224553');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:10:25.224553', '2023-12-05 16:10:25.224553')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:10:28.095241', '2023-12-05 16:10:28.095241');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:10:28.095241', '2023-12-05 16:10:28.095241')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:10:44.660291', '2023-12-05 16:10:44.660291');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:10:44.660291', '2023-12-05 16:10:44.660291')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:10:54.049745', '2023-12-05 16:10:54.049745');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:10:54.049745', '2023-12-05 16:10:54.049745')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:12:30.350069', '2023-12-05 16:12:30.350069');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:12:30.350069', '2023-12-05 16:12:30.350069')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "xapi_middleware_statements"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "xapi_middleware_statements" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "actor_name" varchar, "verb_id" varchar, "object_type" varchar, "object_identifier" varchar, "statement_json" text, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20231204141223)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2023-12-05 16:13:35.201080', '2023-12-05 16:13:35.201081') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'c44b38df6865608c8bbfa7746a0bd1960d93dda4', '2023-12-05 16:13:35.201571', '2023-12-05 16:13:35.201572') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:13:35.243414', '2023-12-05 16:13:35.243414');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:13:35.243414', '2023-12-05 16:13:35.243414')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:13:46.691559', '2023-12-05 16:13:46.691559');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:13:46.691559', '2023-12-05 16:13:46.691559')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:13:54.140528', '2023-12-05 16:13:54.140528');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:13:54.140528', '2023-12-05 16:13:54.140528')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:14:18.420002', '2023-12-05 16:14:18.420002');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-05 16:14:18.420002', '2023-12-05 16:14:18.420002')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.4ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 08:39:38.420158', '2023-12-06 08:39:38.420158');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 08:39:38.420158', '2023-12-06 08:39:38.420158')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 08:39:47.943839', '2023-12-06 08:39:47.943839');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 08:39:47.943839', '2023-12-06 08:39:47.943839')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.7ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:04:55.121733', '2023-12-06 10:04:55.121733');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:04:55.121733', '2023-12-06 10:04:55.121733')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.5ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:20:31.304873', '2023-12-06 10:20:31.304873');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:20:31.304873', '2023-12-06 10:20:31.304873')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:25:06.063781', '2023-12-06 10:25:06.063781');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:25:06.063781', '2023-12-06 10:25:06.063781')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:25:32.315689', '2023-12-06 10:25:32.315689');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:25:32.315689', '2023-12-06 10:25:32.315689')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:25:51.021804', '2023-12-06 10:25:51.021804');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:25:51.021804', '2023-12-06 10:25:51.021804')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:26:29.605158', '2023-12-06 10:26:29.605158');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:26:29.605158', '2023-12-06 10:26:29.605158')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:26:39.789841', '2023-12-06 10:26:39.789841');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:26:39.789841', '2023-12-06 10:26:39.789841')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:26:52.417314', '2023-12-06 10:26:52.417314');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:26:52.417314', '2023-12-06 10:26:52.417314')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:27:12.563468', '2023-12-06 10:27:12.563468');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:27:12.563468', '2023-12-06 10:27:12.563468')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:27:17.285729', '2023-12-06 10:27:17.285729');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:27:17.285729', '2023-12-06 10:27:17.285729')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":null}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:32:09.503706', '2023-12-06 10:32:09.503706');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:32:09.503706', '2023-12-06 10:32:09.503706')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:32:29.215835', '2023-12-06 10:32:29.215835');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:32:29.215835', '2023-12-06 10:32:29.215835')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:32:38.483598', '2023-12-06 10:32:38.483598');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:32:38.483598', '2023-12-06 10:32:38.483598')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\",\"fr\":\"test\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:32:46.558810', '2023-12-06 10:32:46.558810');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:32:46.558810', '2023-12-06 10:32:46.558810')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:33:03.417936', '2023-12-06 10:33:03.417936');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:33:03.417936', '2023-12-06 10:33:03.417936')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "xapi_middleware_statements"[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "xapi_middleware_statements" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "actor_name" varchar, "verb_id" varchar, "verb_display" varchar, "verb_display_full" varchar, "object_type" varchar, "object_identifier" varchar, "statement_json" text, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20231204141223)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2023-12-06 10:36:34.131404', '2023-12-06 10:36:34.131406') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', '72ac6ba89b858ade0ce074f1003cc99f58787ad1', '2023-12-06 10:36:34.132412', '2023-12-06 10:36:34.132413') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:36:34.176481', '2023-12-06 10:36:34.176481');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:36:34.176481', '2023-12-06 10:36:34.176481')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": null,
  "verb_display_full": null,
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:36:58.981460', '2023-12-06 10:36:58.981460');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:36:58.981460', '2023-12-06 10:36:58.981460')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": null,
  "verb_display_full": null,
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:44:26.747710', '2023-12-06 10:44:26.747710');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:44:26.747710', '2023-12-06 10:44:26.747710')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:44:45.501598', '2023-12-06 10:44:45.501598');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:44:45.501598', '2023-12-06 10:44:45.501598')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:45:09.101796', '2023-12-06 10:45:09.101796');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:45:09.101796', '2023-12-06 10:45:09.101796')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:46:55.517762', '2023-12-06 10:46:55.517762');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:46:55.517762', '2023-12-06 10:46:55.517762')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:48:00.844284', '2023-12-06 10:48:00.844284');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:48:00.844284', '2023-12-06 10:48:00.844284')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:48:19.158309', '2023-12-06 10:48:19.158309');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:48:19.158309', '2023-12-06 10:48:19.158309')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:48:27.721167', '2023-12-06 10:48:27.721167');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:48:27.721167', '2023-12-06 10:48:27.721167')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:48:51.659891', '2023-12-06 10:48:51.659891');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:48:51.659891', '2023-12-06 10:48:51.659891')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:58:04.936425', '2023-12-06 10:58:04.936425');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:58:04.936425', '2023-12-06 10:58:04.936425')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:58:17.700213', '2023-12-06 10:58:17.700213');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:58:17.700213', '2023-12-06 10:58:17.700213')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:58:35.534481', '2023-12-06 10:58:35.534481');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:58:35.534481', '2023-12-06 10:58:35.534481')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:59:41.514239', '2023-12-06 10:59:41.514239');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:59:41.514239', '2023-12-06 10:59:41.514239')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:59:55.064221', '2023-12-06 10:59:55.064221');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 10:59:55.064221', '2023-12-06 10:59:55.064221')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:00:22.802449', '2023-12-06 11:00:22.802449');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:00:22.802449', '2023-12-06 11:00:22.802449')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:01:20.553380', '2023-12-06 11:01:20.553380');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:01:20.553380', '2023-12-06 11:01:20.553380')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.5ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:01:42.196301', '2023-12-06 11:01:42.196301');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:01:42.196301', '2023-12-06 11:01:42.196301')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:02:05.026908', '2023-12-06 11:02:05.026908');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:02:05.026908', '2023-12-06 11:02:05.026908')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:03:22.325926', '2023-12-06 11:03:22.325926');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:03:22.325926', '2023-12-06 11:03:22.325926')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:04:19.643822', '2023-12-06 11:04:19.643822');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:04:19.643822', '2023-12-06 11:04:19.643822')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:05:10.836485', '2023-12-06 11:05:10.836485');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:05:10.836485', '2023-12-06 11:05:10.836485')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:06:28.226501', '2023-12-06 11:06:28.226501');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:06:28.226501', '2023-12-06 11:06:28.226501')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:06:56.697329', '2023-12-06 11:06:56.697329');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:06:56.697329', '2023-12-06 11:06:56.697329')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.5ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:06:56.708920"], ["updated_at", "2023-12-06 11:06:56.708920"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:06:56.714534"], ["updated_at", "2023-12-06 11:06:56.714534"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
xAPI statement => {
  "id": 980190963,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": "2023-12-06T11:06:56.714Z",
  "updated_at": "2023-12-06T11:06:56.714Z"
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:06:56.719736"], ["updated_at", "2023-12-06 11:06:56.719736"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:06:56.721364"], ["updated_at", "2023-12-06 11:06:56.721364"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:07:06.385066', '2023-12-06 11:07:06.385066');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:07:06.385066', '2023-12-06 11:07:06.385066')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:07:06.396440"], ["updated_at", "2023-12-06 11:07:06.396440"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:07:06.398502"], ["updated_at", "2023-12-06 11:07:06.398502"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
xAPI statement => {
  "id": 980190963,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": "2023-12-06T11:07:06.398Z",
  "updated_at": "2023-12-06T11:07:06.398Z"
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:07:06.402682"], ["updated_at", "2023-12-06 11:07:06.402682"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:07:06.404449"], ["updated_at", "2023-12-06 11:07:06.404449"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:07:12.280078', '2023-12-06 11:07:12.280078');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:07:12.280078', '2023-12-06 11:07:12.280078')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:07:12.292156"], ["updated_at", "2023-12-06 11:07:12.292156"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
xAPI statement => {
  "id": 980190963,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": "2023-12-06T11:07:12.292Z",
  "updated_at": "2023-12-06T11:07:12.292Z"
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:07:12.296258"], ["updated_at", "2023-12-06 11:07:12.296258"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:07:12.298262"], ["updated_at", "2023-12-06 11:07:12.298262"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:07:12.300222"], ["updated_at", "2023-12-06 11:07:12.300222"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:08:36.864515', '2023-12-06 11:08:36.864515');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:08:36.864515', '2023-12-06 11:08:36.864515')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:09:41.654317', '2023-12-06 11:09:41.654317');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:09:41.654317', '2023-12-06 11:09:41.654317')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:09:51.757031', '2023-12-06 11:09:51.757031');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:09:51.757031', '2023-12-06 11:09:51.757031')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:10:45.356029', '2023-12-06 11:10:45.356029');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:10:45.356029', '2023-12-06 11:10:45.356029')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:11:08.824573', '2023-12-06 11:11:08.824573');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:11:08.824573', '2023-12-06 11:11:08.824573')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:11:19.506649', '2023-12-06 11:11:19.506649');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:11:19.506649', '2023-12-06 11:11:19.506649')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:11:40.930880', '2023-12-06 11:11:40.930880');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:11:40.930880', '2023-12-06 11:11:40.930880')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:12:02.360998', '2023-12-06 11:12:02.360998');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:12:02.360998', '2023-12-06 11:12:02.360998')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:12:16.651999', '2023-12-06 11:12:16.651999');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:12:16.651999', '2023-12-06 11:12:16.651999')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:12:24.310796', '2023-12-06 11:12:24.310796');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:12:24.310796', '2023-12-06 11:12:24.310796')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.4ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:12:24.332837"], ["updated_at", "2023-12-06 11:12:24.332837"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:12:24.335212"], ["updated_at", "2023-12-06 11:12:24.335212"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:12:24.337138"], ["updated_at", "2023-12-06 11:12:24.337138"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
xAPI statement => {
  "id": 980190963,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": "2023-12-06T11:12:24.337Z",
  "updated_at": "2023-12-06T11:12:24.337Z"
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:12:24.341748"], ["updated_at", "2023-12-06 11:12:24.341748"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:12:32.009940', '2023-12-06 11:12:32.009940');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:12:32.009940', '2023-12-06 11:12:32.009940')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:12:32.021457"], ["updated_at", "2023-12-06 11:12:32.021457"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:12:32.026444"], ["updated_at", "2023-12-06 11:12:32.026444"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
xAPI statement => {
  "id": 980190963,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": "2023-12-06T11:12:32.026Z",
  "updated_at": "2023-12-06T11:12:32.026Z"
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:12:32.029886"], ["updated_at", "2023-12-06 11:12:32.029886"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:12:32.031749"], ["updated_at", "2023-12-06 11:12:32.031749"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:12:49.095163', '2023-12-06 11:12:49.095163');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:12:49.095163', '2023-12-06 11:12:49.095163')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:13:04.920636', '2023-12-06 11:13:04.920636');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:13:04.920636', '2023-12-06 11:13:04.920636')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:13:25.678600', '2023-12-06 11:13:25.678600');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:13:25.678600', '2023-12-06 11:13:25.678600')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:13:32.097575', '2023-12-06 11:13:32.097575');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:13:32.097575', '2023-12-06 11:13:32.097575')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:13:48.081773', '2023-12-06 11:13:48.081773');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:13:48.081773', '2023-12-06 11:13:48.081773')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:14:43.531108', '2023-12-06 11:14:43.531108');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:14:43.531108', '2023-12-06 11:14:43.531108')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:14:55.751441', '2023-12-06 11:14:55.751441');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:14:55.751441', '2023-12-06 11:14:55.751441')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.5ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:15:47.014850', '2023-12-06 11:15:47.014850');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:15:47.014850', '2023-12-06 11:15:47.014850')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:16:11.607939', '2023-12-06 11:16:11.607939');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:16:11.607939', '2023-12-06 11:16:11.607939')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.4ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:16:11.619296"], ["updated_at", "2023-12-06 11:16:11.619296"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
xAPI statement => {
  "id": 980190963,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": "2023-12-06T11:16:11.619Z",
  "updated_at": "2023-12-06T11:16:11.619Z"
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:16:11.626998"], ["updated_at", "2023-12-06 11:16:11.626998"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:16:11.628892"], ["updated_at", "2023-12-06 11:16:11.628892"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:16:11.630584"], ["updated_at", "2023-12-06 11:16:11.630584"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:16:36.788679', '2023-12-06 11:16:36.788679');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:16:36.788679', '2023-12-06 11:16:36.788679')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:16:52.655907', '2023-12-06 11:16:52.655907');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:16:52.655907', '2023-12-06 11:16:52.655907')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:16:58.970530', '2023-12-06 11:16:58.970530');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:16:58.970530', '2023-12-06 11:16:58.970530')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:17:11.429737', '2023-12-06 11:17:11.429737');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:17:11.429737', '2023-12-06 11:17:11.429737')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:17:20.803203', '2023-12-06 11:17:20.803203');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:17:20.803203', '2023-12-06 11:17:20.803203')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:17:28.326312', '2023-12-06 11:17:28.326312');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:17:28.326312', '2023-12-06 11:17:28.326312')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:17:39.628243', '2023-12-06 11:17:39.628243');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:17:39.628243', '2023-12-06 11:17:39.628243')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:17:39.641054"], ["updated_at", "2023-12-06 11:17:39.641054"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:17:39.643891"], ["updated_at", "2023-12-06 11:17:39.643891"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
xAPI statement => {
  "id": 980190963,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": "2023-12-06T11:17:39.643Z",
  "updated_at": "2023-12-06T11:17:39.643Z"
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:17:39.647568"], ["updated_at", "2023-12-06 11:17:39.647568"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:17:39.650034"], ["updated_at", "2023-12-06 11:17:39.650034"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:18:09.426728', '2023-12-06 11:18:09.426728');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:18:09.426728', '2023-12-06 11:18:09.426728')[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:18:09.439277"], ["updated_at", "2023-12-06 11:18:09.439277"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:18:09.441215"], ["updated_at", "2023-12-06 11:18:09.441215"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:18:09.442999"], ["updated_at", "2023-12-06 11:18:09.442999"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:18:09.444547"], ["updated_at", "2023-12-06 11:18:09.444547"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
xAPI statement => {
  "id": 980190964,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": "2023-12-06T11:18:09.444Z",
  "updated_at": "2023-12-06T11:18:09.444Z"
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:18:09.447514"], ["updated_at", "2023-12-06 11:18:09.447514"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:18:09.449302"], ["updated_at", "2023-12-06 11:18:09.449302"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:18:09.451482"], ["updated_at", "2023-12-06 11:18:09.451482"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:18:09.453039"], ["updated_at", "2023-12-06 11:18:09.453039"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:18:21.687602', '2023-12-06 11:18:21.687602');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:18:21.687602', '2023-12-06 11:18:21.687602')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:18:21.699299"], ["updated_at", "2023-12-06 11:18:21.699299"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:18:21.701704"], ["updated_at", "2023-12-06 11:18:21.701704"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:18:21.703697"], ["updated_at", "2023-12-06 11:18:21.703697"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:18:21.705349"], ["updated_at", "2023-12-06 11:18:21.705349"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:18:21.706943"], ["updated_at", "2023-12-06 11:18:21.706943"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:18:21.708510"], ["updated_at", "2023-12-06 11:18:21.708510"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
xAPI statement => {
  "id": 980190964,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": "2023-12-06T11:18:21.708Z",
  "updated_at": "2023-12-06T11:18:21.708Z"
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:18:21.711798"], ["updated_at", "2023-12-06 11:18:21.711798"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:18:21.713720"], ["updated_at", "2023-12-06 11:18:21.713720"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:18:33.503382', '2023-12-06 11:18:33.503382');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:18:33.503382', '2023-12-06 11:18:33.503382')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:18:33.515224"], ["updated_at", "2023-12-06 11:18:33.515224"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:18:33.517353"], ["updated_at", "2023-12-06 11:18:33.517353"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:18:33.519101"], ["updated_at", "2023-12-06 11:18:33.519101"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:18:33.520661"], ["updated_at", "2023-12-06 11:18:33.520661"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:18:33.522285"], ["updated_at", "2023-12-06 11:18:33.522285"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:18:33.524569"], ["updated_at", "2023-12-06 11:18:33.524569"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
xAPI statement => {
  "id": 980190964,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": "2023-12-06T11:18:33.524Z",
  "updated_at": "2023-12-06T11:18:33.524Z"
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:18:33.527889"], ["updated_at", "2023-12-06 11:18:33.527889"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:18:33.529638"], ["updated_at", "2023-12-06 11:18:33.529638"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:18:40.961067', '2023-12-06 11:18:40.961067');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:18:40.961067', '2023-12-06 11:18:40.961067')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:18:40.973007"], ["updated_at", "2023-12-06 11:18:40.973007"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:18:40.975420"], ["updated_at", "2023-12-06 11:18:40.975420"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:18:40.977419"], ["updated_at", "2023-12-06 11:18:40.977419"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:18:40.979081"], ["updated_at", "2023-12-06 11:18:40.979081"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:18:40.980636"], ["updated_at", "2023-12-06 11:18:40.980636"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:18:40.982170"], ["updated_at", "2023-12-06 11:18:40.982170"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:18:40.984166"], ["updated_at", "2023-12-06 11:18:40.984166"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:18:40.986300"], ["updated_at", "2023-12-06 11:18:40.986300"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
xAPI statement => {
  "id": 980190964,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": "2023-12-06T11:18:40.986Z",
  "updated_at": "2023-12-06T11:18:40.986Z"
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:19:04.540173', '2023-12-06 11:19:04.540173');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:19:04.540173', '2023-12-06 11:19:04.540173')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:19:04.551768"], ["updated_at", "2023-12-06 11:19:04.551768"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:19:04.554289"], ["updated_at", "2023-12-06 11:19:04.554289"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:19:04.558832"], ["updated_at", "2023-12-06 11:19:04.558832"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:19:04.560662"], ["updated_at", "2023-12-06 11:19:04.560662"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
xAPI statement => {
  "id": 980190964,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": "2023-12-06T11:19:04.560Z",
  "updated_at": "2023-12-06T11:19:04.560Z"
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:19:04.564242"], ["updated_at", "2023-12-06 11:19:04.564242"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:19:04.566335"], ["updated_at", "2023-12-06 11:19:04.566335"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:19:04.568067"], ["updated_at", "2023-12-06 11:19:04.568067"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:19:04.569644"], ["updated_at", "2023-12-06 11:19:04.569644"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:19:43.904546', '2023-12-06 11:19:43.904546');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 11:19:43.904546', '2023-12-06 11:19:43.904546')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:19:43.913680"], ["updated_at", "2023-12-06 11:19:43.913680"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:19:43.917549"], ["updated_at", "2023-12-06 11:19:43.917549"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
xAPI statement => {
  "id": 980190964,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": "2023-12-06T11:19:43.917Z",
  "updated_at": "2023-12-06T11:19:43.917Z"
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:19:43.919879"], ["updated_at", "2023-12-06 11:19:43.919879"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:19:43.921174"], ["updated_at", "2023-12-06 11:19:43.921174"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:19:43.922214"], ["updated_at", "2023-12-06 11:19:43.922214"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:19:43.923439"], ["updated_at", "2023-12-06 11:19:43.923439"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 11:19:43.924428"], ["updated_at", "2023-12-06 11:19:43.924428"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", nil], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 11:19:43.926215"], ["updated_at", "2023-12-06 11:19:43.926215"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 13:28:18.120319', '2023-12-06 13:28:18.120319');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 13:28:18.120319', '2023-12-06 13:28:18.120319')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.4ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 13:28:18.130921"], ["updated_at", "2023-12-06 13:28:18.130921"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 13:28:18.136378"], ["updated_at", "2023-12-06 13:28:18.136378"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 13:28:18.137601"], ["updated_at", "2023-12-06 13:28:18.137601"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 13:28:18.138968"], ["updated_at", "2023-12-06 13:28:18.138968"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 13:28:18.139889"], ["updated_at", "2023-12-06 13:28:18.139889"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 13:28:18.141157"], ["updated_at", "2023-12-06 13:28:18.141157"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
xAPI statement => {
  "id": 980190964,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": "980190963",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": "2023-12-06T13:28:18.141Z",
  "updated_at": "2023-12-06T13:28:18.141Z"
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 13:28:18.144215"], ["updated_at", "2023-12-06 13:28:18.144215"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 13:28:18.145485"], ["updated_at", "2023-12-06 13:28:18.145485"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:10:16.487441', '2023-12-06 14:10:16.487441');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:10:16.487441', '2023-12-06 14:10:16.487441')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.4ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 14:10:16.502196"], ["updated_at", "2023-12-06 14:10:16.502196"]]
  [1m[36mXapiMiddleware::Statement Create (0.0ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:10:16.503016"], ["updated_at", "2023-12-06 14:10:16.503016"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 14:10:16.504864"], ["updated_at", "2023-12-06 14:10:16.504864"]]
  [1m[36mXapiMiddleware::Statement Create (0.0ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:10:16.505127"], ["updated_at", "2023-12-06 14:10:16.505127"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 14:10:16.506689"], ["updated_at", "2023-12-06 14:10:16.506689"]]
  [1m[36mXapiMiddleware::Statement Create (0.0ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:10:16.506931"], ["updated_at", "2023-12-06 14:10:16.506931"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 14:10:16.508445"], ["updated_at", "2023-12-06 14:10:16.508445"]]
  [1m[36mXapiMiddleware::Statement Create (0.0ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:10:16.508670"], ["updated_at", "2023-12-06 14:10:16.508670"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
xAPI statement => {
  "id": 980190964,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": "980190963",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": "2023-12-06T14:10:16.508Z",
  "updated_at": "2023-12-06T14:10:16.508Z"
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:10:28.995066', '2023-12-06 14:10:28.995066');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:10:28.995066', '2023-12-06 14:10:28.995066')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.4ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 14:10:29.008266"], ["updated_at", "2023-12-06 14:10:29.008266"]]
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:10:29.009196"], ["updated_at", "2023-12-06 14:10:29.009196"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 14:10:29.011462"], ["updated_at", "2023-12-06 14:10:29.011462"]]
  [1m[36mXapiMiddleware::Statement Create (0.0ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:10:29.011754"], ["updated_at", "2023-12-06 14:10:29.011754"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 14:10:29.013458"], ["updated_at", "2023-12-06 14:10:29.013458"]]
  [1m[36mXapiMiddleware::Statement Create (0.0ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:10:29.013705"], ["updated_at", "2023-12-06 14:10:29.013705"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 14:10:29.015391"], ["updated_at", "2023-12-06 14:10:29.015391"]]
  [1m[36mXapiMiddleware::Statement Create (0.0ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:10:29.015677"], ["updated_at", "2023-12-06 14:10:29.015677"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
xAPI statement => {
  "id": 980190964,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": "980190963",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": "2023-12-06T14:10:29.015Z",
  "updated_at": "2023-12-06T14:10:29.015Z"
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:10:50.791137', '2023-12-06 14:10:50.791137');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:10:50.791137', '2023-12-06 14:10:50.791137')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 14:10:50.804632"], ["updated_at", "2023-12-06 14:10:50.804632"]]
  [1m[36mXapiMiddleware::Statement Create (0.0ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:10:50.805356"], ["updated_at", "2023-12-06 14:10:50.805356"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.4ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 14:10:50.807322"], ["updated_at", "2023-12-06 14:10:50.807322"]]
  [1m[36mXapiMiddleware::Statement Create (0.0ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:10:50.808023"], ["updated_at", "2023-12-06 14:10:50.808023"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
xAPI statement => {
  "id": 980190964,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": "980190963",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": "2023-12-06T14:10:50.808Z",
  "updated_at": "2023-12-06T14:10:50.808Z"
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 14:10:50.812223"], ["updated_at", "2023-12-06 14:10:50.812223"]]
  [1m[36mXapiMiddleware::Statement Create (0.0ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:10:50.812529"], ["updated_at", "2023-12-06 14:10:50.812529"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 14:10:50.814241"], ["updated_at", "2023-12-06 14:10:50.814241"]]
  [1m[36mXapiMiddleware::Statement Create (0.0ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:10:50.814563"], ["updated_at", "2023-12-06 14:10:50.814563"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.4ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:11:01.393286', '2023-12-06 14:11:01.393286');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:11:01.393286', '2023-12-06 14:11:01.393286')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.4ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 14:11:01.406901"], ["updated_at", "2023-12-06 14:11:01.406901"]]
  [1m[36mXapiMiddleware::Statement Create (0.0ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:11:01.407797"], ["updated_at", "2023-12-06 14:11:01.407797"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 14:11:01.410086"], ["updated_at", "2023-12-06 14:11:01.410086"]]
  [1m[36mXapiMiddleware::Statement Create (0.0ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:11:01.410463"], ["updated_at", "2023-12-06 14:11:01.410463"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 14:11:01.412144"], ["updated_at", "2023-12-06 14:11:01.412144"]]
  [1m[36mXapiMiddleware::Statement Create (0.0ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:11:01.412395"], ["updated_at", "2023-12-06 14:11:01.412395"]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 14:11:01.414032"], ["updated_at", "2023-12-06 14:11:01.414032"]]
  [1m[36mXapiMiddleware::Statement Create (0.0ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:11:01.414259"], ["updated_at", "2023-12-06 14:11:01.414259"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
xAPI statement => {
  "id": 980190964,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": "980190963",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": "2023-12-06T14:11:01.414Z",
  "updated_at": "2023-12-06T14:11:01.414Z"
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:11:09.816571', '2023-12-06 14:11:09.816571');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:11:09.816571', '2023-12-06 14:11:09.816571')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 14:11:09.828008"], ["updated_at", "2023-12-06 14:11:09.828008"]]
  [1m[36mXapiMiddleware::Statement Create (0.0ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:11:09.828600"], ["updated_at", "2023-12-06 14:11:09.828600"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
xAPI statement => {
  "id": 980190964,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": "980190963",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": "2023-12-06T14:11:09.828Z",
  "updated_at": "2023-12-06T14:11:09.828Z"
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 14:11:09.835200"], ["updated_at", "2023-12-06 14:11:09.835200"]]
  [1m[36mXapiMiddleware::Statement Create (0.0ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:11:09.835636"], ["updated_at", "2023-12-06 14:11:09.835636"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 14:11:09.837473"], ["updated_at", "2023-12-06 14:11:09.837473"]]
  [1m[36mXapiMiddleware::Statement Create (0.0ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:11:09.837726"], ["updated_at", "2023-12-06 14:11:09.837726"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.2ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Example Admin"], ["verb_id", "http://adlnet.gov/expapi/verbs/voided"], ["verb_display", "voided"], ["verb_display_full", "{\"en-US\":\"voided\"}"], ["object_type", "Activity"], ["object_identifier", "e05aa883-acaf-40ad-bf54-02c8ce485fb0"], ["statement_json", "{\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\",\"mbox_sha1sum\":\"sha1:38316d6796ee006127376955977936057b239c59\"},\"result\":null}"], ["created_at", "2023-12-06 14:11:09.839624"], ["updated_at", "2023-12-06 14:11:09.839624"]]
  [1m[36mXapiMiddleware::Statement Create (0.0ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Ÿøhnnÿ Dœe"], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}"], ["object_type", "SubStatement"], ["object_identifier", "980190963"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:11:09.840189"], ["updated_at", "2023-12-06 14:11:09.840189"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.5ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:11:39.599269', '2023-12-06 14:11:39.599269');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:11:39.599269', '2023-12-06 14:11:39.599269')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:11:55.787556', '2023-12-06 14:11:55.787556');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:11:55.787556', '2023-12-06 14:11:55.787556')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.4ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Actor "], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"verb\"}"], ["object_type", "Activity"], ["object_identifier", "http://example.com/object"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"mbox\":\"mailto:actor1@localhost.com\",\"mbox_sha1sum\":\"sha1:d35132bd0bfc15ada6f5229002b5288d94a46f52\",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:11:55.799806"], ["updated_at", "2023-12-06 14:11:55.799806"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Actor "], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"verb\"}"], ["object_type", "Activity"], ["object_identifier", "http://example.com/object"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"mbox\":\"mailto:actor1@localhost.com\",\"mbox_sha1sum\":\"sha1:d35132bd0bfc15ada6f5229002b5288d94a46f52\",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:11:55.804608"], ["updated_at", "2023-12-06 14:11:55.804608"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Actor "], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"verb\"}"], ["object_type", "Activity"], ["object_identifier", "http://example.com/object"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"mbox\":\"mailto:actor1@localhost.com\",\"mbox_sha1sum\":\"sha1:d35132bd0bfc15ada6f5229002b5288d94a46f52\",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:11:55.806484"], ["updated_at", "2023-12-06 14:11:55.806484"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
xAPI statement => {
  "id": null,
  "actor_name": "Ÿøhnnÿ Dœe",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}",
  "object_type": "SubStatement",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"voided\",\"fr\":\"test\",\"gb\":\"proot\"}},\"object\":{\"object_type\":\"SubStatement\",\"verb\":{\"id\":\"http://adlnet.gov/expapi/verbs/voided\",\"display\":{\"en-US\":\"voided\"}},\"object\":{\"objectType\":\"StatementRef\",\"id\":\"e05aa883-acaf-40ad-bf54-02c8ce485fb0\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Example Admin\",\"mbox\":\"mailto:admin@example.adlnet.gov\"}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Ÿøhnnÿ Dœe\",\"mbox\":\"mailto:yohnny.doe@localhost.com\",\"mbox_sha1sum\":\"sha1:59b3fe22cce73eb9e93eaa1af47fd2c315f439d8\",\"account\":{\"name\":\"JohnnyAccount#1\"},\"openid\":\"http://example.com/object/JohnnyAccount#1\"},\"result\":{\"response\":\"The user answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mSAVEPOINT active_record_1[0m
  [1m[36mXapiMiddleware::Statement Create (0.1ms)[0m  [1m[32mINSERT INTO "xapi_middleware_statements" ("actor_name", "verb_id", "verb_display", "verb_display_full", "object_type", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING "id"[0m  [["actor_name", "Actor "], ["verb_id", "http://example.com/verb"], ["verb_display", "verb"], ["verb_display_full", "{\"en-US\":\"verb\"}"], ["object_type", "Activity"], ["object_identifier", "http://example.com/object"], ["statement_json", "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"mbox\":\"mailto:actor1@localhost.com\",\"mbox_sha1sum\":\"sha1:d35132bd0bfc15ada6f5229002b5288d94a46f52\",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}"], ["created_at", "2023-12-06 14:11:55.810989"], ["updated_at", "2023-12-06 14:11:55.810989"]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.5ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:13:29.920806', '2023-12-06 14:13:29.920806');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:13:29.920806', '2023-12-06 14:13:29.920806')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"mbox\":\"mailto:actor1@localhost.com\",\"mbox_sha1sum\":\"sha1:d35132bd0bfc15ada6f5229002b5288d94a46f52\",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:32:32.378088', '2023-12-06 14:32:32.378088');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:32:32.378088', '2023-12-06 14:32:32.378088')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"mbox\":\"mailto:actor1@localhost.com\",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:32:41.458496', '2023-12-06 14:32:41.458496');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:32:41.458496', '2023-12-06 14:32:41.458496')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"mbox\":\"mailto:actor1@localhost.com\",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:33:01.405177', '2023-12-06 14:33:01.405177');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:33:01.405177', '2023-12-06 14:33:01.405177')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"mbox\":\"mailto:actor1@localhost.com\",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:33:13.336761', '2023-12-06 14:33:13.336761');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:33:13.336761', '2023-12-06 14:33:13.336761')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"mbox_sha1sum\":\"sha1:d35132bd0bfc15ada6f5229002b5288d94a46f52\",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:33:24.072304', '2023-12-06 14:33:24.072304');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:33:24.072304', '2023-12-06 14:33:24.072304')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"mbox_sha1sum\":\"sha1:d35132bd0bfc15ada6f5229002b5288d94a46f52\",\"account\":{\"name\":\"Actor#1\"}},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:33:27.917785', '2023-12-06 14:33:27.917785');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:33:27.917785', '2023-12-06 14:33:27.917785')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"}},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:33:45.125061', '2023-12-06 14:33:45.125061');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:33:45.125061', '2023-12-06 14:33:45.125061')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"}},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:34:02.152930', '2023-12-06 14:34:02.152930');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:34:02.152930', '2023-12-06 14:34:02.152930')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:34:09.931110', '2023-12-06 14:34:09.931110');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:34:09.931110', '2023-12-06 14:34:09.931110')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"mbox_sha1sum\":\"sha1:d35132bd0bfc15ada6f5229002b5288d94a46f52\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:41:58.339480', '2023-12-06 14:41:58.339480');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:41:58.339480', '2023-12-06 14:41:58.339480')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:42:15.819996', '2023-12-06 14:42:15.819996');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:42:15.819996', '2023-12-06 14:42:15.819996')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:42:36.176462', '2023-12-06 14:42:36.176462');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:42:36.176462', '2023-12-06 14:42:36.176462')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:42:41.897501', '2023-12-06 14:42:41.897501');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:42:41.897501', '2023-12-06 14:42:41.897501')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:43:00.179478', '2023-12-06 14:43:00.179478');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 14:43:00.179478', '2023-12-06 14:43:00.179478')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "xapi_middleware_statements"[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "xapi_middleware_statements" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "actor_name" varchar, "actor_mbox" varchar, "actor_sha1sum" varchar, "actor_openid" varchar, "actor_account_homepage" varchar, "actor_account_name" varchar, "verb_id" varchar, "verb_display" varchar, "verb_display_full" varchar, "object_type" varchar, "object_identifier" varchar, "statement_json" text, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20231204141223)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'test', '2023-12-06 15:33:58.777411', '2023-12-06 15:33:58.777415') RETURNING "key"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('schema_sha1', 'b310dc063516da56557692e34fb7b21254b99544', '2023-12-06 15:33:58.777874', '2023-12-06 15:33:58.777874') RETURNING "key"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 15:33:58.806081', '2023-12-06 15:33:58.806081');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 15:33:58.806081', '2023-12-06 15:33:58.806081')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 16:02:16.094059', '2023-12-06 16:02:16.094059');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-06 16:02:16.094059', '2023-12-06 16:02:16.094059')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 13:35:31.592097', '2023-12-08 13:35:31.592097');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 13:35:31.592097', '2023-12-08 13:35:31.592097')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 13:43:12.063241', '2023-12-08 13:43:12.063241');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 13:43:12.063241', '2023-12-08 13:43:12.063241')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 13:44:00.849411', '2023-12-08 13:44:00.849411');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 13:44:00.849411', '2023-12-08 13:44:00.849411')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\"},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 13:44:11.440561', '2023-12-08 13:44:11.440561');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 13:44:11.440561', '2023-12-08 13:44:11.440561')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 13:44:23.030311', '2023-12-08 13:44:23.030311');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 13:44:23.030311', '2023-12-08 13:44:23.030311')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\",\"definition\":{\"name\":{},\"description\":{},\"extensions\":{}}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 13:44:36.475951', '2023-12-08 13:44:36.475951');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 13:44:36.475951', '2023-12-08 13:44:36.475951')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\",\"definition\":{\"type\":\"http://adlnet.gov/expapi/activities/course\",\"name\":{},\"description\":{},\"extensions\":{}}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 13:44:45.403005', '2023-12-08 13:44:45.403005');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 13:44:45.403005', '2023-12-08 13:44:45.403005')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 13:44:53.610751', '2023-12-08 13:44:53.610751');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 13:44:53.610751', '2023-12-08 13:44:53.610751')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\",\"definition\":{\"type\":\"http://adlnet.gov/expapi/activities/course\",\"name\":{},\"description\":{},\"extensions\":{}}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:50:21.617619', '2023-12-08 15:50:21.617619');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:50:21.617619', '2023-12-08 15:50:21.617619')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\",\"definition\":{\"type\":\"http://adlnet.gov/expapi/activities/course\",\"name\":{},\"description\":{},\"extensions\":{}}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:50:35.187992', '2023-12-08 15:50:35.187992');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:50:35.187992', '2023-12-08 15:50:35.187992')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\",\"definition\":{\"type\":\"http://adlnet.gov/expapi/activities/course\",\"name\":{},\"description\":{},\"extensions\":{}}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.5ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:52:48.873560', '2023-12-08 15:52:48.873560');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:52:48.873560', '2023-12-08 15:52:48.873560')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:53:15.189464', '2023-12-08 15:53:15.189464');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:53:15.189464', '2023-12-08 15:53:15.189464')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:53:29.935926', '2023-12-08 15:53:29.935926');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:53:29.935926', '2023-12-08 15:53:29.935926')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:53:38.394390', '2023-12-08 15:53:38.394390');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:53:38.394390', '2023-12-08 15:53:38.394390')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:53:58.189711', '2023-12-08 15:53:58.189711');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:53:58.189711', '2023-12-08 15:53:58.189711')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:56:11.990938', '2023-12-08 15:56:11.990938');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:56:11.990938', '2023-12-08 15:56:11.990938')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.3ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:56:40.137682', '2023-12-08 15:56:40.137682');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:56:40.137682', '2023-12-08 15:56:40.137682')[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:56:42.765806', '2023-12-08 15:56:42.765806');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:56:42.765806', '2023-12-08 15:56:42.765806')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:58:32.860726', '2023-12-08 15:58:32.860726');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:58:32.860726', '2023-12-08 15:58:32.860726')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:59:46.988602', '2023-12-08 15:59:46.988602');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:59:46.988602', '2023-12-08 15:59:46.988602')[0m
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\",\"definition\":{\"type\":\"http://adlnet.gov/expapi/activities/course\",\"name\":{},\"description\":{},\"extensions\":{}}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:59:59.998547', '2023-12-08 15:59:59.998547');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 15:59:59.998547', '2023-12-08 15:59:59.998547')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": null,
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"definition\":{\"type\":\"http://adlnet.gov/expapi/activities/course\",\"name\":{},\"description\":{},\"extensions\":{}}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 16:01:42.792624', '2023-12-08 16:01:42.792624');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 16:01:42.792624', '2023-12-08 16:01:42.792624')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 16:01:53.372815', '2023-12-08 16:01:53.372815');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 16:01:53.372815', '2023-12-08 16:01:53.372815')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 16:02:12.527110', '2023-12-08 16:02:12.527110');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-08 16:02:12.527110', '2023-12-08 16:02:12.527110')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:32:32.338096', '2023-12-11 15:32:32.338096');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:32:32.338096', '2023-12-11 15:32:32.338096')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:32:41.408042', '2023-12-11 15:32:41.408042');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:32:41.408042', '2023-12-11 15:32:41.408042')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:32:58.247938', '2023-12-11 15:32:58.247938');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:32:58.247938', '2023-12-11 15:32:58.247938')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:33:04.072560', '2023-12-11 15:33:04.072560');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:33:04.072560', '2023-12-11 15:33:04.072560')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:33:19.986908', '2023-12-11 15:33:19.986908');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:33:19.986908', '2023-12-11 15:33:19.986908')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:34:14.933260', '2023-12-11 15:34:14.933260');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:34:14.933260', '2023-12-11 15:34:14.933260')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:34:25.155168', '2023-12-11 15:34:25.155168');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:34:25.155168', '2023-12-11 15:34:25.155168')[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\",\"definition\":{\"type\":\"http://adlnet.gov/expapi/activities/course\",\"name\":{},\"description\":{},\"extensions\":{}}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:34:30.617884', '2023-12-11 15:34:30.617884');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:34:30.617884', '2023-12-11 15:34:30.617884')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:34:52.524475', '2023-12-11 15:34:52.524475');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:34:52.524475', '2023-12-11 15:34:52.524475')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:34:58.752038', '2023-12-11 15:34:58.752038');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:34:58.752038', '2023-12-11 15:34:58.752038')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:35:06.018816', '2023-12-11 15:35:06.018816');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:35:06.018816', '2023-12-11 15:35:06.018816')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\",\"definition\":{\"type\":\"http://adlnet.gov/expapi/activities/course\",\"name\":{},\"description\":{},\"extensions\":{}}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.6ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:37:59.120599', '2023-12-11 15:37:59.120599');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:37:59.120599', '2023-12-11 15:37:59.120599')[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:38:10.456167', '2023-12-11 15:38:10.456167');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:38:10.456167', '2023-12-11 15:38:10.456167')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\",\"definition\":{\"type\":\"http://adlnet.gov/expapi/activities/course\",\"name\":{},\"description\":{},\"extensions\":{}}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:39:44.503215', '2023-12-11 15:39:44.503215');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:39:44.503215', '2023-12-11 15:39:44.503215')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\",\"definition\":{\"type\":\"http://adlnet.gov/expapi/activities/course\",\"name\":{},\"description\":{},\"extensions\":{}}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:40:12.004119', '2023-12-11 15:40:12.004119');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:40:12.004119', '2023-12-11 15:40:12.004119')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\",\"definition\":{\"type\":\"http://adlnet.gov/expapi/activities/course\",\"name\":{},\"description\":{},\"extensions\":{}}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:41:19.209773', '2023-12-11 15:41:19.209773');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:41:19.209773', '2023-12-11 15:41:19.209773')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\",\"definition\":{\"type\":\"http://adlnet.gov/expapi/activities/course\",\"name\":{},\"description\":{},\"extensions\":{}}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:41:25.835459', '2023-12-11 15:41:25.835459');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:41:25.835459', '2023-12-11 15:41:25.835459')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\",\"definition\":{\"type\":\"http://adlnet.gov/expapi/activities/course\",\"name\":{},\"description\":{},\"extensions\":{}}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:41:45.941440', '2023-12-11 15:41:45.941440');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:41:45.941440', '2023-12-11 15:41:45.941440')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:41:54.670906', '2023-12-11 15:41:54.670906');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:41:54.670906', '2023-12-11 15:41:54.670906')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\",\"definition\":{\"type\":\"http://adlnet.gov/expapi/activities/course\",\"name\":{},\"description\":{},\"extensions\":{}}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:41:57.731623', '2023-12-11 15:41:57.731623');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:41:57.731623', '2023-12-11 15:41:57.731623')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.2ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\",\"definition\":{\"type\":\"http://adlnet.gov/expapi/activities/course\",\"name\":{},\"description\":{},\"extensions\":{}}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:42:03.595719', '2023-12-11 15:42:03.595719');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:42:03.595719', '2023-12-11 15:42:03.595719')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\",\"definition\":{\"type\":\"http://adlnet.gov/expapi/activities/course\",\"name\":{},\"description\":{},\"extensions\":{}}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:42:56.484888', '2023-12-11 15:42:56.484888');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:42:56.484888', '2023-12-11 15:42:56.484888')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:43:03.049522', '2023-12-11 15:43:03.049522');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:43:03.049522', '2023-12-11 15:43:03.049522')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\",\"definition\":{\"type\":\"http://adlnet.gov/expapi/activities/course\",\"name\":{},\"description\":{},\"extensions\":{}}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:43:46.985625', '2023-12-11 15:43:46.985625');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2023-12-11 15:43:46.985625', '2023-12-11 15:43:46.985625')[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
xAPI statement => {
  "id": null,
  "actor_name": "Actor ",
  "actor_mbox": null,
  "actor_sha1sum": null,
  "actor_openid": null,
  "actor_account_homepage": null,
  "actor_account_name": null,
  "verb_id": "http://example.com/verb",
  "verb_display": "verb",
  "verb_display_full": "{\"en-US\":\"verb\"}",
  "object_type": "Activity",
  "object_identifier": "http://example.com/object",
  "statement_json": "{\"verb\":{\"id\":\"http://example.com/verb\",\"display\":{\"en-US\":\"verb\"}},\"object\":{\"object_type\":\"Activity\",\"id\":\"http://example.com/object\",\"definition\":{\"type\":\"http://adlnet.gov/expapi/activities/course\",\"name\":{},\"description\":{},\"extensions\":{}}},\"actor\":{\"objectType\":\"Agent\",\"name\":\"Actor \",\"account\":{\"name\":\"Actor#1\"},\"openid\":\"http://example.com/object/Actor#1\"},\"result\":{\"response\":\"The actor 1 answered\",\"success\":true,\"score\":{\"raw\":50,\"min\":0,\"max\":100}}}",
  "created_at": null,
  "updated_at": null
}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.4ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2024-06-12 07:49:18.735916', '2024-06-12 07:49:18.735916');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2024-06-12 07:49:18.735916', '2024-06-12 07:49:18.735916')[0m
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.1ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.2ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2024-06-12 08:20:16.870449', '2024-06-12 08:20:16.870449');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2024-06-12 08:20:16.870449', '2024-06-12 08:20:16.870449')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2024-06-12 08:23:06.187460', '2024-06-12 08:23:06.187460');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2024-06-12 08:23:06.187460', '2024-06-12 08:23:06.187460')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2024-06-12 08:24:39.268143', '2024-06-12 08:24:39.268143');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2024-06-12 08:24:39.268143', '2024-06-12 08:24:39.268143')[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mFixtures Load (0.1ms)[0m  [1m[31mDELETE FROM "xapi_middleware_statements";
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (980190962, 'MyString', 'MyString', 'MyString', 'MyText', '2024-06-12 08:25:10.832254', '2024-06-12 08:25:10.832254');
INSERT INTO "xapi_middleware_statements" ("id", "actor_name", "verb_id", "object_identifier", "statement_json", "created_at", "updated_at") VALUES (298486374, 'MyString', 'MyString', 'MyString', 'MyText', '2024-06-12 08:25:10.832254', '2024-06-12 08:25:10.832254')[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_key_check[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------
XapiMiddleware::StatementTest: test_valid_statement
---------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_does_not_log_when_configuration_disallows
------------------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
---------------------------------------------------------------------
XapiMiddleware::StatementTest: test_invalid_statement_without_verb_id
---------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
-------------------------------------------------------------------------
XapiMiddleware::StatementTest: test_output_logs_when_configuration_allows
-------------------------------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
------------------------------------------------
XapiMiddlewareTest: test_it_has_a_version_number
------------------------------------------------
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "schema_sha1"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
